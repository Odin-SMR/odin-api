[tox]
envlist = system, proxy
skipsdist = true

[testenv:unit]
sitepackages=true
deps=
	-rrequirements.txt
	-rrequirements_extra.txt
	pytest==4.1.0
	pytest-mongo==1.2.1
	selenium==2.53.6
basepython=python3
commands = pytest src/test {posargs}

[testenv:system]
basepython=python3
deps=
	flask==1.0.2
	matplotlib==3.0.3
	numpy==1.16.3
	pycrypto==2.6.1
	pygresql==5.0.6
	pytest==4.5.0
	pytest-docker==0.6.1
	python-dateutil==2.8.0
	requests==2.21.0
	selenium==3.141.0
	scipy==1.2.1
whitelist_externals=
	xvfb-run
	chromedriver
	docker-compose
commands = xvfb-run -a pytest --junitxml=result.xml src/systemtest {posargs}

[testenv:proxy]
basepython=python3
deps=
	pytest==4.1.0
	pytest-docker==0.6.1
	requests==2.21.0
	pygresql==5.0.6
whitelist_externals=
	xvfb-run
	chromedriver
	docker-compose
commands = xvfb-run -a pytest --junitxml=result.xml services/proxy/tests {posargs}
