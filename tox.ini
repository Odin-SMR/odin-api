[tox]
envlist = py311,lint,system
skipsdist = true

[pytest]
norecursedirs = env
markers =
	slow: marks tests as slow (use '-- runslow' to run)

[testenv]
allowlist_externals = sh
deps=
	-rrequirements-dev.txt
commands =
	py311,system: pytest {env:TOX_TEST_PATH:src/test} {posargs}
	lint: sh -c 'black --check . || (echo "Formatting errors found"; exit 0)'
setenv =
	system: TOX_TEST_PATH = src/systemtest
