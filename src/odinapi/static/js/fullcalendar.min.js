(function(g){"function"===typeof define&&define.amd?define(["jquery","moment"],g):"object"===typeof exports?module.exports=g(require("jquery"),require("moment")):g(jQuery,moment)})(function(g,q){function Za(a){var b={views:a.views||{}},c;g.each(a,function(a,e){"views"!=a&&(g.isPlainObject(e)&&!/(time|duration|interval)$/i.test(a)&&-1==g.inArray(a,Q)?(c=null,g.each(e,function(e,h){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(e)?(b.views[e]||(b.views[e]={}),b.views[e][a]=h):
(c||(c={}),c[e]=h)}),c&&(b[a]=c)):b[a]=e)});return b}function sa(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1});b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function ta(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function U(){g("body").addClass("fc-not-allowed")}function R(){g("body").removeClass("fc-not-allowed")}function ua(a,b,c){var d=Math.floor(b/a.length),e=Math.floor(b-d*(a.length-1)),f=[],h=[],m=[],
l=0;a.height("");a.each(function(b,c){var p=b===a.length-1?e:d,n=g(c).outerHeight(!0);n<p?(f.push(c),h.push(n),m.push(g(c).height())):l+=n});c&&(b-=l,d=Math.floor(b/f.length),e=Math.floor(b-d*(f.length-1)));g(f).each(function(a,b){var c=a===f.length-1?e:d,l=h[a],n=c-(l-m[a]);l<c&&g(b).height(n)})}function va(a){var b=0;a.find("> *").each(function(a,d){var e=g(d).outerWidth();e>b&&(b=e)});b++;a.width(b);return b}function wa(a,b){a.height(b).addClass("fc-scroller");if(a[0].scrollHeight-1>a[0].clientHeight)return!0;
da(a);return!1}function da(a){a.height("").removeClass("fc-scroller")}function ea(a){var b=a.css("position"),c=a.parents().filter(function(){var a=g(this);return/(auto|scroll)/.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"===b||!c.length?g(a[0].ownerDocument||document):c}function fa(a){var b=a.offset();return{left:b.left,right:b.left+a.outerWidth(),top:b.top,bottom:b.top+a.outerHeight()}}function xa(a){var b=a.offset(),c=V(a),d=b.left+(parseFloat(a.css("border-left-width"))||
0)+c.left,b=b.top+(parseFloat(a.css("border-top-width"))||0)+c.top;return{left:d,right:d+a[0].clientWidth,top:b,bottom:b+a[0].clientHeight}}function V(a){var b=a.innerWidth()-a[0].clientWidth,c={left:0,right:0,top:0,bottom:a.innerHeight()-a[0].clientHeight};if(null===ga){var d=g("<div><div/></div>").css({position:"absolute",top:-1E3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),e=d.children().offset().left>d.offset().left;d.remove();ga=e}ga&&"rtl"==a.css("direction")?
c.left=b:c.right=b;return c}function ya(a,b){var c={left:Math.max(a.left,b.left),right:Math.min(a.right,b.right),top:Math.max(a.top,b.top),bottom:Math.min(a.bottom,b.bottom)};return c.left<c.right&&c.top<c.bottom?c:!1}function za(a){var b=[],c=[],d;"string"===typeof a?c=a.split(/\s*,\s*/):"function"===typeof a?c=[a]:g.isArray(a)&&(c=a);for(a=0;a<c.length;a++)d=c[a],"string"===typeof d?b.push("-"==d.charAt(0)?{field:d.substring(1),order:-1}:{field:d,order:1}):"function"===typeof d&&b.push({func:d});
return b}function Aa(a,b,c){var d,e;for(d=0;d<c.length;d++)if(e=Ba(a,b,c[d]))return e;return 0}function Ba(a,b,c){return c.func?c.func(a,b):Ca(a[c.field],b[c.field])*(c.order||1)}function Ca(a,b){return!a&&!b?0:null==b?-1:null==a?1:"string"===g.type(a)||"string"===g.type(b)?String(a).localeCompare(String(b)):a-b}function ha(a,b){var c=a.start,d=a.end,e=b.start,f=b.end;if(d>e&&c<f)return c>=e?(c=c.clone(),e=!0):(c=e.clone(),e=!1),d<=f?(d=d.clone(),f=!0):(d=f.clone(),f=!1),{start:c,end:d,isStart:e,
isEnd:f}}function Da(a,b){return q.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function ia(a,b){var c,d,e;for(c=0;c<ja.length;c++){d=ja[c];e=d;var f=a;e=null!=b?b.diff(f,e,!0):q.isDuration(f)?f.as(e):f.end.diff(f.start,e,!0);if(1<=e&&G(e))break}return d}function ka(a,b){var c,d;if(M(a)||M(b))return a/b;c=a.asMonths();d=b.asMonths();return 1<=Math.abs(c)&&G(c)&&1<=Math.abs(d)&&G(d)?c/d:a.asDays()/b.asDays()}function M(a){return Boolean(a.hours()||
a.minutes()||a.seconds()||a.milliseconds())}function Ea(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function N(a,b){var c={},d,e,f,h,g;if(b)for(d=0;d<b.length;d++){e=b[d];f=[];for(h=a.length-1;0<=h;h--)if(g=a[h][e],"object"===typeof g)f.unshift(g);else if(void 0!==g){c[e]=g;break}f.length&&(c[e]=N(f))}for(d=a.length-1;0<=d;d--)for(e in f=a[d],f)e in c||(c[e]=f[e]);return c}function W(a){var b=function(){};b.prototype=a;return new b}function X(a,b){for(var c in a)Fa.call(a,c)&&(b[c]=a[c])}
function ab(a,b){var c=["constructor","toString","valueOf"],d,e;for(d=0;d<c.length;d++)e=c[d],a[e]!==Object.prototype[e]&&(b[e]=a[e])}function Y(a,b,c){g.isFunction(a)&&(a=[a]);if(a){var d,e;for(d=0;d<a.length;d++)e=a[d].apply(b,c)||e;return e}}function F(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function x(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Z(a){var b=
[];g.each(a,function(a,d){null!=d&&b.push(a+":"+d)});return b.join(";")}function bb(a,b){return a-b}function G(a){return 0===a%1}function C(a,b){var c=a[b];return function(){return c.apply(a,arguments)}}function la(a,b){var c,d,e,f,h=function(){var g=+new Date-f;g<b&&0<g?c=setTimeout(h,b-g):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this;d=arguments;f=+new Date;c||(c=setTimeout(h,b))}}function ma(a,b,c){var d=a[0],e=1==a.length&&"string"===typeof d,f,h,m;if(q.isMoment(d))a=q.apply(null,
a),Ga(d,a);else if("[object Date]"===Object.prototype.toString.call(d)||d instanceof Date||void 0===d)a=q.apply(null,a);else{h=f=!1;if(e)if(cb.test(d))d+="-01",a=[d],h=f=!0;else{if(m=db.exec(d))f=!m[5],h=!0}else g.isArray(d)&&(h=!0);a=b||f?q.utc.apply(q,a):q.apply(null,a);f?(a._ambigTime=!0,a._ambigZone=!0):c&&(h?a._ambigZone=!0:e&&(a.utcOffset?a.utcOffset(d):a.zone(d)))}a._fullCalendar=!0;return a}function na(a,b){var c=!1,d=!1,e=a.length,f=[],h,g;for(h=0;h<e;h++)g=a[h],q.isMoment(g)||(g=n.moment.parseZone(g)),
c=c||g._ambigTime,d=d||g._ambigZone,f.push(g);for(h=0;h<e;h++)g=f[h],!b&&c&&!g._ambigTime?f[h]=g.clone().stripTime():d&&!g._ambigZone&&(f[h]=g.clone().stripZone());return f}function Ga(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1);a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function Ha(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function J(a,b){return v.format.call(a,b)}function Ia(a,
b){var c="",d;for(d=0;d<b.length;d++)c+=oa(a,b[d]);return c}function oa(a,b){var c;return"string"===typeof b?b:(c=b.token)?Ja[c]?Ja[c](a):J(a,c):b.maybe&&(c=Ia(a,b.maybe),c.match(/[1-9]/))?c:""}function Ka(a,b,c,d,e){a=n.moment.parseZone(a);b=n.moment.parseZone(b);c=(a.localeData||a.lang).call(a).longDateFormat(c)||c;d=d||" - ";c=c in S?S[c]:S[c]=pa(c);var f=a.clone().stripZone(),h=b.clone().stripZone(),g,l,u="",k,p="",q="",I="",La="";for(l=0;l<c.length;l++){g=Ma(a,b,f,h,c[l]);if(!1===g)break;u+=
g}for(k=c.length-1;k>l;k--){g=Ma(a,b,f,h,c[k]);if(!1===g)break;p=g+p}for(f=l;f<=k;f++)q+=oa(a,c[f]),I+=oa(b,c[f]);if(q||I)La=e?I+d+q:q+d+I;return u+La+p}function Ma(a,b,c,d,e){if("string"===typeof e)return e;if(b=e.token)if((e=eb[b.charAt(0)])&&c.isSame(d,e))return J(a,b);return!1}function pa(a){for(var b=[],c=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g,d;d=c.exec(a);)d[1]?b.push(d[1]):d[2]?b.push({maybe:pa(d[2])}):d[3]?b.push({token:d[3]}):d[5]&&b.push(d[5]);return b}function D(){}
function fb(a,b){var c;Fa.call(b,"constructor")&&(c=b.constructor);"function"!==typeof c&&(c=b.constructor=function(){a.apply(this,arguments)});c.prototype=W(a.prototype);X(b,c.prototype);ab(b,c.prototype);X(a,c);return c}function Na(a,b){return!a&&!b?!0:a&&b?a.component===b.component&&Oa(a,b)&&Oa(b,a):!1}function Oa(a,b){for(var c in a)if(!/^(component|left|right|top|bottom)$/.test(c)&&a[c]!==b[c])return!1;return!0}function gb(a){var b={},c,d;for(c=0;c<a.length;c++)d=a[c],(b[d._id]||(b[d._id]=[])).push(d);
return b}function hb(a,b){return a.start-b.start}function ib(a){var b=n.dataAttrPrefix,c,d,e,f;b&&(b+="-");if(c=a.data(b+"event")||null)c="object"===typeof c?g.extend({},c):{},d=c.start,null==d&&(d=c.time),e=c.duration,f=c.stick,delete c.start,delete c.time,delete c.duration,delete c.stick;null==d&&(d=a.data(b+"start"));null==d&&(d=a.data(b+"time"));null==e&&(e=a.data(b+"duration"));null==f&&(f=a.data(b+"stick"));d=null!=d?q.duration(d):null;e=null!=e?q.duration(e):null;f=Boolean(f);return{eventProps:c,
startTime:d,duration:e,stick:f}}function jb(a,b){return a.leftCol-b.leftCol}function Pa(a){var b=a.forwardSegs,c=0,d,e;if(void 0===a.forwardPressure){for(d=0;d<b.length;d++)e=b[d],Pa(e),c=Math.max(c,1+e.forwardPressure);a.forwardPressure=c}}function Qa(a,b,c){c=c||[];for(var d=0;d<b.length;d++)a.bottom>b[d].top&&a.top<b[d].bottom&&c.push(b[d]);return c}function Ra(a){g.each(kb,function(b,c){null==a[b]&&(a[b]=c(a))})}function Sa(a){var b=q.localeData||q.langData;return b.call(q,a)||b.call(q,"en")}
function lb(a,b){function c(c){var d=g('<div class="fc-'+c+'"/>');(c=b.header[c])&&g.each(c.split(" "),function(c){var h=g(),k=!0;g.each(this.split(","),function(c,d){var m,l,n,q,r,H,w;"title"==d?(h=h.add(g("<h2>&nbsp;</h2>")),k=!1):((m=(a.options.customButtons||{})[d])?(n=function(a){m.click&&m.click.call(w[0],a)},q="",r=m.text):(l=a.getViewSpec(d))?(n=function(){a.changeView(d)},e.push(d),q=l.buttonTextOverride,r=l.buttonTextDefault):a[d]&&(n=function(){a[d]()},q=(a.overrides.buttonText||{})[d],
r=b.buttonText[d]),n&&(l=m?m.themeIcon:b.themeButtonIcons[d],H=m?m.icon:b.buttonIcons[d],q=q?x(q):l&&b.theme?"<span class='ui-icon ui-icon-"+l+"'></span>":H&&!b.theme?"<span class='fc-icon fc-icon-"+H+"'></span>":x(r),r=["fc-"+d+"-button",f+"-button",f+"-state-default"],w=g('<button type="button" class="'+r.join(" ")+'">'+q+"</button>").click(function(a){w.hasClass(f+"-state-disabled")||(n(a),(w.hasClass(f+"-state-active")||w.hasClass(f+"-state-disabled"))&&w.removeClass(f+"-state-hover"))}).mousedown(function(){w.not("."+
f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){w.removeClass(f+"-state-down")}).hover(function(){w.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){w.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),h=h.add(w)))});k&&h.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end();1<h.length?(c=g("<div/>"),k&&c.addClass("fc-button-group"),c.append(h),d.append(c)):d.append(h)});
return d}this.render=function(){var a=b.header;f=b.theme?"ui":"fc";if(a)return d=g("<div class='fc-toolbar'/>").append(c("left")).append(c("right")).append(c("center")).append('<div class="fc-clear"/>')};this.removeElement=function(){d.remove();d=g()};this.updateTitle=function(a){d.find("h2").text(a)};this.activateButton=function(a){d.find(".fc-"+a+"-button").addClass(f+"-state-active")};this.deactivateButton=function(a){d.find(".fc-"+a+"-button").removeClass(f+"-state-active")};this.disableButton=
function(a){d.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")};this.enableButton=function(a){d.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")};this.getViewsWithButtons=function(){return e};var d=g(),e=[],f}function mb(a){function b(a,b){c(a,function(c){var d=g.isArray(a.events),e,f;if(b==y){if(c)for(e=0;e<c.length;e++)f=c[e],(f=d?f:m(f,a))&&B.push.apply(B,k(f));C--;C||H(B)}})}function c(b,d){var e,f=n.sourceFetchers,h;for(e=0;e<
f.length;e++){h=f[e].call(r,b,t.clone(),v.clone(),a.timezone,d);if(!0===h)return;if("object"==typeof h){c(h,d);return}}if(e=b.events)g.isFunction(e)?(r.pushLoading(),e.call(r,t.clone(),v.clone(),a.timezone,function(a){d(a);r.popLoading()})):g.isArray(e)?d(e):d();else if(b.url){var m=b.success,l=b.error,k=b.complete;e=g.isFunction(b.data)?b.data():b.data;e=g.extend({},e||{});f=F(b.startParam,a.startParam);h=F(b.endParam,a.endParam);var u=F(b.timezoneParam,a.timezoneParam);f&&(e[f]=t.format());h&&(e[h]=
v.format());a.timezone&&"local"!=a.timezone&&(e[u]=a.timezone);r.pushLoading();g.ajax(g.extend({},nb,b,{data:e,success:function(a){a=a||[];var b=Y(m,this,arguments);g.isArray(b)&&(a=b);d(a)},error:function(){Y(l,this,arguments);d()},complete:function(){Y(k,this,arguments);r.popLoading()}}))}else d()}function d(a){var b=n.sourceNormalizers,c;g.isFunction(a)||g.isArray(a)?c={events:a}:"string"===typeof a?c={url:a}:"object"===typeof a&&(c=g.extend({},a));if(c){c.className?"string"===typeof c.className&&
(c.className=c.className.split(/\s+/)):c.className=[];g.isArray(c.events)&&(c.origArray=c.events,c.events=g.map(c.events,function(a){return m(a,c)}));for(a=0;a<b.length;a++)b[a].call(r,c);return c}}function e(a){return("object"===typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function f(a){var b={};g.each(a,function(a,c){/^_|^(id|allDay|start|end)$/.test(a)||void 0!==c&&/undefined|null|boolean|number|string/.test(g.type(c))&&(b[a]=c)});return b}function h(a){return g.isFunction(a)?
g.grep(B,a):null!=a?(a+="",g.grep(B,function(b){return b._id==a})):B}function m(b,c){var d={},e,f,h;a.eventDataTransform&&(b=a.eventDataTransform(b));c&&c.eventDataTransform&&(b=c.eventDataTransform(b));g.extend(d,b);c&&(d.source=c);d._id=b._id||(void 0===b.id?"_fc"+ob++:b.id+"");d.className=b.className?"string"==typeof b.className?b.className.split(/\s+/):b.className:[];e=b.start||b.date;f=b.end;Ea(e)&&(e=q.duration(e));Ea(f)&&(f=q.duration(f));if(b.dow||q.isDuration(e)||q.isDuration(f))d.start=
e?q.duration(e):null,d.end=f?q.duration(f):null,d._recurring=!0;else{if(e&&(e=r.moment(e),!e.isValid()))return!1;f&&(f=r.moment(f),f.isValid()||(f=null));h=b.allDay;void 0===h&&(h=F(c?c.allDayDefault:void 0,a.allDayDefault));d.start=e;d.end=f;d.allDay=h;l(d);$(d)}return d}function l(b){u(b);b.end&&!b.end.isAfter(b.start)&&(b.end=null);b.end||(b.end=a.forceEventDuration?r.getDefaultEventEnd(b.allDay,b.start):null)}function u(a){null==a.allDay&&(a.allDay=!(a.start.hasTime()||a.end&&a.end.hasTime()));
a.allDay?(a.start.stripTime(),a.end&&a.end.stripTime()):(a.start.hasTime()||(a.start=r.applyTimezone(a.start.time(0))),a.end&&!a.end.hasTime()&&(a.end=r.applyTimezone(a.end.time(0))))}function k(a,b,c){var d=[],e,f,h,m,k,u;b=b||t;c=c||v;if(a)if(a._recurring){if(f=a.dow){e={};for(h=0;h<f.length;h++)e[f[h]]=!0}for(b=b.clone().stripTime();b.isBefore(c);){if(!e||e[b.day()])m=a.start,k=a.end,f=b.clone(),u=null,m&&(f=f.time(m)),k&&(u=b.clone().time(k)),h=g.extend({},a),m=!m&&!k,k=h,k.start=f,k.end=u,k.allDay=
m,l(k),$(k),d.push(h);b.add(1,"days")}}else d.push(a);return d}function p(a,b,c){function d(a,e){return c?q.duration(Math.round(a.diff(e,c,!0)),c):b.allDay?q.duration({days:a.clone().stripTime().diff(e.clone().stripTime(),"days")}):Da(a,e)}var e={},f,m,k;b=b||{};b.start||(b.start=a.start.clone());void 0===b.end&&(b.end=a.end?a.end.clone():null);null==b.allDay&&(b.allDay=a.allDay);l(b);f={start:a._start.clone(),end:a._end?a._end.clone():r.getDefaultEventEnd(a._allDay,a._start),allDay:b.allDay};l(f);
m=null!==a._end&&null===b.end;k=d(b.start,f.start);b.end?(f=d(b.end,f.end),f=f.subtract(k)):f=null;g.each(b,function(a,b){/^_|^(id|allDay|start|end)$/.test(a)||void 0!==b&&(e[a]=b)});a=$a(h(a._id),m,b.allDay,k,f,e);return{dateDelta:k,durationDelta:f,undo:a}}function $a(a,b,c,d,e,f){var h=r.getIsAmbigTimezone(),m=[];d&&!d.valueOf()&&(d=null);e&&!e.valueOf()&&(e=null);g.each(a,function(a,k){var u,p;u={start:k.start.clone(),end:k.end?k.end.clone():null,allDay:k.allDay};g.each(f,function(a){u[a]=k[a]});
p={start:k._start,end:k._end,allDay:c};l(p);b?p.end=null:e&&!p.end&&(p.end=r.getDefaultEventEnd(p.allDay,p.start));d&&(p.start.add(d),p.end&&p.end.add(d));e&&p.end.add(e);if(h&&!p.allDay&&(d||e))p.start.stripZone(),p.end&&p.end.stripZone();g.extend(k,f,p);$(k);m.push(function(){g.extend(k,u);$(k)})});return function(){for(var a=0;a<m.length;a++)m[a]()}}function I(b){var c=a.businessHours,d={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},e=r.getView(),
f;c&&(f=g.extend({},d,"object"===typeof c?c:{}));return f?(b&&(f.start=null,f.end=null),k(m(f),e.start,e.end)):[]}function x(b,c){var d=c.source||{},e=F(c.constraint,d.constraint,a.eventConstraint),d=F(c.overlap,d.overlap,a.eventOverlap);return A(b,e,d,c)}function z(b){return A(b,a.selectConstraint,a.selectOverlap)}function A(a,b,c,d){var e,f,g;if(null!=b){e="businessHours"===b?I():"object"===typeof b?k(m(b)):h(b);f=!1;for(b=0;b<e.length;b++){var l=e[b];g=a;var p=l.start.clone().stripZone(),l=r.getEventEnd(l).stripZone();
if(g.start>=p&&g.end<=l){f=!0;break}}if(!f)return!1}e=r.getPeerEvents(a,d);for(b=0;b<e.length;b++)if(l=f=e[b],g=a,p=l.start.clone().stripZone(),l=r.getEventEnd(l).stripZone(),g.start<l&&g.end>p&&(!1===c||"function"===typeof c&&!c(f,d)||d&&(g=F(f.overlap,(f.source||{}).overlap),!1===g||"function"===typeof g&&!g(d,f))))return!1;return!0}var r=this;r.isFetchNeeded=function(a,b){return!t||a<t||b>v};r.fetchEvents=function(a,c){t=a;v=c;B=[];var d=++y,e=s.length;C=e;for(var f=0;f<e;f++)b(s[f],d)};r.addEventSource=
function(a){if(a=d(a))s.push(a),C++,b(a,y)};r.removeEventSource=function(a){s=g.grep(s,function(b){return!(b&&a&&e(b)==e(a))});B=g.grep(B,function(b){return!(b.source&&a&&e(b.source)==e(a))});H(B)};r.updateEvent=function(a){a.start=r.moment(a.start);a.end=a.end?r.moment(a.end):null;p(a,f(a));H(B)};r.renderEvent=function(a,b){var c=m(a),d,e;if(c){c=k(c);for(d=0;d<c.length;d++)e=c[d],e.source||(b&&(w.events.push(e),e.source=w),B.push(e));H(B);return c}return[]};r.removeEvents=function(a){var b,c;null==
a?a=function(){return!0}:g.isFunction(a)||(b=a+"",a=function(a){return a._id==b});B=g.grep(B,a,!0);for(c=0;c<s.length;c++)g.isArray(s[c].events)&&(s[c].events=g.grep(s[c].events,a,!0));H(B)};r.clientEvents=h;r.mutateEvent=p;r.normalizeEventDates=l;r.normalizeEventTimes=u;var H=r.reportEvents,w={events:[]},s=[w],t,v,y=0,C=0,B=[];g.each((a.events?[a.events]:[]).concat(a.eventSources||[]),function(a,b){var c=d(b);c&&s.push(c)});r.getBusinessHoursEvents=I;r.isEventSpanAllowed=x;r.isExternalSpanAllowed=
function(a,b,c){var d;c&&(b=g.extend({},c,b),d=k(m(b))[0]);return d?x(a,d):z(a)};r.isSelectionSpanAllowed=z;r.getEventCache=function(){return B}}function $(a){a._allDay=a.allDay;a._start=a.start.clone();a._end=a.end?a.end.clone():null}var n=g.fullCalendar={version:"2.5.0",internalApiVersion:1},K=n.views={};g.fn.fullCalendar=function(a){var b=Array.prototype.slice.call(arguments,1),c=this;this.each(function(d,e){var f=g(e),h=f.data("fullCalendar");"string"===typeof a?h&&g.isFunction(h[a])&&(h=h[a].apply(h,
b),d||(c=h),"destroy"===a&&f.removeData("fullCalendar")):h||(h=new y(f,a),f.data("fullCalendar",h),h.render())});return c};var Q=["header","buttonText","buttonIcons","themeButtonIcons"];n.intersectRanges=ha;n.applyAll=Y;n.debounce=la;n.isInt=G;n.htmlEscape=x;n.cssToStr=Z;n.proxy=C;n.capitaliseFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};n.getOuterRect=fa;n.getClientRect=xa;n.getContentRect=function(a){var b=a.offset(),c=b.left+(parseFloat(a.css("border-left-width"))||0)+(parseFloat(a.css("padding-left"))||
0),b=b.top+(parseFloat(a.css("border-top-width"))||0)+(parseFloat(a.css("padding-top"))||0);return{left:c,right:c+a.width(),top:b,bottom:b+a.height()}};n.getScrollbarWidths=V;var ga=null;n.intersectRects=ya;n.parseFieldSpecs=za;n.compareByFieldSpecs=Aa;n.compareByFieldSpec=Ba;n.flexibleCompare=Ca;n.computeIntervalUnit=ia;n.divideRangeByDuration=function(a,b,c){var d;if(M(c))return(b-a)/c;d=c.asMonths();return 1<=Math.abs(d)&&G(d)?b.diff(a,"months",!0)/d:b.diff(a,"days",!0)/c.asDays()};n.divideDurationByDuration=
ka;n.multiplyDuration=function(a,b){var c;if(M(a))return q.duration(a*b);c=a.asMonths();return 1<=Math.abs(c)&&G(c)?q.duration({months:c*b}):q.duration({days:a.asDays()*b})};n.durationHasTime=M;var Ta="sun mon tue wed thu fri sat".split(" "),ja="year month week day hour minute second millisecond".split(" ");n.log=function(){var a=window.console;if(a&&a.log)return a.log.apply(a,arguments)};n.warn=function(){var a=window.console;return a&&a.warn?a.warn.apply(a,arguments):n.log.apply(n,arguments)};var Fa=
{}.hasOwnProperty,cb=/^\s*\d{4}-\d\d$/,db=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,t=q.fn,v=g.extend({},t),Ua,qa,Va;n.moment=function(){return ma(arguments)};n.moment.utc=function(){var a=ma(arguments,!0);a.hasTime()&&a.utc();return a};n.moment.parseZone=function(){return ma(arguments,!0,!0)};t.clone=function(){var a=v.clone.apply(this,arguments);Ga(this,a);this._fullCalendar&&(a._fullCalendar=!0);return a};t.week=t.weeks=function(a){var b=(this._locale||
this._lang)._fullCalendar_weekCalc;return null==a&&"function"===typeof b?b(this):"ISO"===b?v.isoWeek.apply(this,arguments):v.week.apply(this,arguments)};t.time=function(a){if(!this._fullCalendar)return v.time.apply(this,arguments);if(null==a)return q.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1;!q.isDuration(a)&&!q.isMoment(a)&&(a=q.duration(a));var b=0;q.isDuration(a)&&(b=24*Math.floor(a.asDays()));return this.hours(b+
a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())};t.stripTime=function(){var a;this._ambigTime||(a=this.toArray(),this.utc(),qa(this,a.slice(0,3)),this._ambigZone=this._ambigTime=!0);return this};t.hasTime=function(){return!this._ambigTime};t.stripZone=function(){var a,b;this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),qa(this,a),this._ambigTime=b||!1,this._ambigZone=!0);return this};t.hasZone=function(){return!this._ambigZone};t.local=function(){var a=
this.toArray(),b=this._ambigZone;v.local.apply(this,arguments);this._ambigZone=this._ambigTime=!1;b&&Va(this,a);return this};t.utc=function(){v.utc.apply(this,arguments);this._ambigZone=this._ambigTime=!1;return this};g.each(["zone","utcOffset"],function(a,b){v[b]&&(t[b]=function(a){null!=a&&(this._ambigZone=this._ambigTime=!1);return v[b].apply(this,arguments)})});t.format=function(){return this._fullCalendar&&arguments[0]?Ia(this,arguments[0]in S?S[arguments[0]]:S[arguments[0]]=pa(arguments[0])):
this._ambigTime?J(this,"YYYY-MM-DD"):this._ambigZone?J(this,"YYYY-MM-DD[T]HH:mm:ss"):v.format.apply(this,arguments)};t.toISOString=function(){return this._ambigTime?J(this,"YYYY-MM-DD"):this._ambigZone?J(this,"YYYY-MM-DD[T]HH:mm:ss"):v.toISOString.apply(this,arguments)};t.isWithin=function(a,b){var c=na([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]};t.isSame=function(a,b){var c;if(!this._fullCalendar)return v.isSame.apply(this,arguments);if(b)return c=na([this,a],!0),v.isSame.call(c[0],c[1],b);a=n.moment.parseZone(a);
return v.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)};g.each(["isBefore","isAfter"],function(a,b){t[b]=function(a,d){var e;if(!this._fullCalendar)return v[b].apply(this,arguments);e=na([this,a]);return v[b].call(e[0],e[1],d)}});qa=(Ua="_d"in q()&&"updateOffset"in q)?function(a,b){a._d.setTime(Date.UTC.apply(Date,b));q.updateOffset(a,!1)}:Ha;Va=Ua?function(a,b){a._d.setTime(+new Date(b[0]||0,b[1]||0,b[2]||0,b[3]||0,b[4]||0,
b[5]||0,b[6]||0));q.updateOffset(a,!1)}:Ha;var Ja={t:function(a){return J(a,"a").charAt(0)},T:function(a){return J(a,"A").charAt(0)}};n.formatRange=Ka;var eb={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},S={};n.Class=D;D.extend=function(){var a=arguments.length,b,c;for(b=0;b<a;b++)c=arguments[b],b<a-1&&X(c.prototype||c,this.prototype);return fb(this,c||{})};D.mixin=function(a){X(a.prototype||a,this.prototype)};var pb=n.Emitter=
D.extend({callbackHash:null,on:function(a,b){this.getCallbacks(a).add(b);return this},off:function(a,b){this.getCallbacks(a).remove(b);return this},trigger:function(a){var b=Array.prototype.slice.call(arguments,1);this.triggerWith(a,this,b);return this},triggerWith:function(a,b,c){this.getCallbacks(a).fireWith(b,c);return this},getCallbacks:function(a){var b;this.callbackHash||(this.callbackHash={});(b=this.callbackHash[a])||(b=this.callbackHash[a]=g.Callbacks());return b}}),qb=D.extend({isHidden:!0,
options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var a=this,b=this.options;this.el=g('<div class="fc-popover"/>').addClass(b.className||"").css({top:0,left:0}).append(b.content).appendTo(b.parentEl);this.el.on("click",
".fc-close",function(){a.hide()});if(b.autoHide)g(document).on("mousedown",this.documentMousedownProxy=C(this,"documentMousedown"))},documentMousedown:function(a){this.el&&!g(a.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide();this.el&&(this.el.remove(),this.el=null);g(document).off("mousedown",this.documentMousedownProxy)},position:function(){var a=this.options,b=this.el.offsetParent().offset(),c=this.el.outerWidth(),d=this.el.outerHeight(),e=g(window),f=ea(this.el),
h,m,l,u;l=a.top||0;u=void 0!==a.left?a.left:void 0!==a.right?a.right-c:0;f.is(window)||f.is(document)?(f=e,m=h=0):(m=f.offset(),h=m.top,m=m.left);h+=e.scrollTop();m+=e.scrollLeft();!1!==a.viewportConstrain&&(l=Math.min(l,h+f.outerHeight()-d-this.margin),l=Math.max(l,h+this.margin),u=Math.min(u,m+f.outerWidth()-c-this.margin),u=Math.max(u,m+this.margin));this.el.css({top:l-b.top,left:u-b.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),
aa=n.CoordCache=D.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(a){this.els=g(a.els);this.isHorizontal=a.isHorizontal;this.isVertical=a.isVertical;this.forcedOffsetParentEl=a.offsetParent?g(a.offsetParent):null},build:function(){this.origin=(this.forcedOffsetParentEl||this.els.eq(0).offsetParent()).offset();this.boundingRect=this.queryBoundingRect();this.isHorizontal&&this.buildElHorizontals();
this.isVertical&&this.buildElVerticals()},clear:function(){this.bottoms=this.tops=this.rights=this.lefts=this.boundingRect=this.origin=null},queryBoundingRect:function(){var a=ea(this.els.eq(0));if(!a.is(document))return xa(a)},buildElHorizontals:function(){var a=[],b=[];this.els.each(function(c,d){var e=g(d),f=e.offset().left,e=e.outerWidth();a.push(f);b.push(f+e)});this.lefts=a;this.rights=b},buildElVerticals:function(){var a=[],b=[];this.els.each(function(c,d){var e=g(d),f=e.offset().top,e=e.outerHeight();
a.push(f);b.push(f+e)});this.tops=a;this.bottoms=b},getHorizontalIndex:function(a){var b=this.boundingRect,c=this.lefts,d=this.rights,e=c.length;if(!b||a>=b.left&&a<b.right)for(b=0;b<e;b++)if(a>=c[b]&&a<d[b])return b},getVerticalIndex:function(a){var b=this.boundingRect,c=this.tops,d=this.bottoms,e=c.length;if(!b||a>=b.top&&a<b.bottom)for(b=0;b<e;b++)if(a>=c[b]&&a<d[b])return b},getLeftOffset:function(a){return this.lefts[a]},getLeftPosition:function(a){return this.lefts[a]-this.origin.left},getRightOffset:function(a){return this.rights[a]},
getRightPosition:function(a){return this.rights[a]-this.origin.left},getWidth:function(a){return this.rights[a]-this.lefts[a]},getTopOffset:function(a){return this.tops[a]},getTopPosition:function(a){return this.tops[a]-this.origin.top},getBottomOffset:function(a){return this.bottoms[a]},getBottomPosition:function(a){return this.bottoms[a]-this.origin.top},getHeight:function(a){return this.bottoms[a]-this.tops[a]}}),L=n.DragListener=D.extend({options:null,isListening:!1,isDragging:!1,originX:null,
originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a){this.options=a=a||{};this.subjectEl=a.subjectEl},mousedown:function(a){1==a.which&&!a.ctrlKey&&(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(a){var b;this.isListening||
(a&&this.options.scroll&&(b=ea(g(a.target)),!b.is(window)&&!b.is(document)&&(this.scrollEl=b,this.scrollHandlerProxy=la(C(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),g(document).on("mousemove",this.mousemoveProxy=C(this,"mousemove")).on("mouseup",this.mouseupProxy=C(this,"mouseup")).on("selectstart",this.preventDefault),a?(this.originX=a.pageX,this.originY=a.pageY):this.originY=this.originX=0,this.isListening=!0,this.listenStart(a))},listenStart:function(a){this.trigger("listenStart",
a)},mousemove:function(a){var b=a.pageX-this.originX,c=a.pageY-this.originY,d;this.isDragging||(d=this.options.distance||1,b*b+c*c>=d*d&&this.startDrag(a));this.isDragging&&this.drag(b,c,a)},startDrag:function(a){this.isListening||this.startListening();this.isDragging||(this.isDragging=!0,this.dragStart(a))},dragStart:function(a){var b=this.subjectEl;this.trigger("dragStart",a);(this.subjectHref=b?b.attr("href"):null)&&b.removeAttr("href")},drag:function(a,b,c){this.trigger("drag",a,b,c);this.updateScroll(c)},
mouseup:function(a){this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.dragStop(a),this.isDragging=!1)},dragStop:function(a){var b=this;this.trigger("dragStop",a);setTimeout(function(){b.subjectHref&&b.subjectEl.attr("href",b.subjectHref)},0)},stopListening:function(a){this.stopDrag(a);this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),g(document).off("mousemove",this.mousemoveProxy).off("mouseup",
this.mouseupProxy).off("selectstart",this.preventDefault),this.mouseupProxy=this.mousemoveProxy=null,this.isListening=!1,this.listenStop(a))},listenStop:function(a){this.trigger("listenStop",a)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a=this.scrollEl;this.scrollBounds=a?fa(a):null},updateScroll:function(a){var b=this.scrollSensitivity,c=this.scrollBounds,
d,e,f,h=0,g=0;c&&(d=(b-(a.pageY-c.top))/b,e=(b-(c.bottom-a.pageY))/b,f=(b-(a.pageX-c.left))/b,a=(b-(c.right-a.pageX))/b,0<=d&&1>=d?h=-1*d*this.scrollSpeed:0<=e&&1>=e&&(h=e*this.scrollSpeed),0<=f&&1>=f?g=-1*f*this.scrollSpeed:0<=a&&1>=a&&(g=a*this.scrollSpeed));this.setScrollVel(h,g)},setScrollVel:function(a,b){this.scrollTopVel=a;this.scrollLeftVel=b;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId)this.scrollIntervalId=setInterval(C(this,"scrollIntervalFunc"),
this.scrollIntervalMs)},constrainScrollVel:function(){var a=this.scrollEl;0>this.scrollTopVel?0>=a.scrollTop()&&(this.scrollTopVel=0):0<this.scrollTopVel&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0);0>this.scrollLeftVel?0>=a.scrollLeft()&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1E3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+
this.scrollTopVel*b);this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b);this.constrainScrollVel();!this.scrollTopVel&&!this.scrollLeftVel&&this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),ba=L.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(a,b){L.call(this,
b);this.component=a},listenStart:function(a){var b=this.subjectEl,c,d,e;L.prototype.listenStart.apply(this,arguments);this.computeCoords();a?(e=d={left:a.pageX,top:a.pageY},b&&(c=fa(b),e={left:Math.min(Math.max(e.left,c.left),c.right),top:Math.min(Math.max(e.top,c.top),c.bottom)}),this.origHit=this.queryHit(e.left,e.top),b&&this.options.subjectCenter&&(this.origHit&&(c=ya(this.origHit,c)||c),e={left:(c.left+c.right)/2,top:(c.top+c.bottom)/2}),this.coordAdjust={left:e.left-d.left,top:e.top-d.top}):
this.coordAdjust=this.origHit=null},computeCoords:function(){this.component.prepareHits();this.computeScrollBounds()},dragStart:function(a){var b;L.prototype.dragStart.apply(this,arguments);(b=this.queryHit(a.pageX,a.pageY))&&this.hitOver(b)},drag:function(a,b,c){var d;L.prototype.drag.apply(this,arguments);d=this.queryHit(c.pageX,c.pageY);Na(d,this.hit)||(this.hit&&this.hitOut(),d&&this.hitOver(d))},dragStop:function(){this.hitDone();L.prototype.dragStop.apply(this,arguments)},hitOver:function(a){var b=
Na(a,this.origHit);this.hit=a;this.trigger("hitOver",this.hit,b,this.origHit)},hitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.hitDone(),this.hit=null)},hitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},listenStop:function(){L.prototype.listenStop.apply(this,arguments);this.hit=this.origHit=null;this.component.releaseHits()},scrollStop:function(){L.prototype.scrollStop.apply(this,arguments);this.computeCoords()},queryHit:function(a,b){this.coordAdjust&&(a+=this.coordAdjust.left,
b+=this.coordAdjust.top);return this.component.queryHit(a,b)}}),rb=D.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(a,b){this.options=b=b||{};this.sourceEl=a;this.parentEl=b.parentEl?g(b.parentEl):a.parent()},start:function(a){this.isFollowing||(this.isFollowing=!0,this.mouseY0=a.pageY,this.mouseX0=a.pageX,this.leftDelta=this.topDelta=
0,this.isHidden||this.updatePosition(),g(document).on("mousemove",this.mousemoveProxy=C(this,"mousemove")))},stop:function(a,b){function c(){this.isAnimating=!1;d.removeElement();this.top0=this.left0=null;b&&b()}var d=this,e=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,g(document).off("mousemove",this.mousemoveProxy),a&&e&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:e,complete:c})):c())},getEl:function(){var a=
this.el;a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl));return a},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl();null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),
b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left);this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0;this.leftDelta=a.pageX-this.mouseX0;this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),O=n.Grid=D.extend({view:null,isRTL:null,start:null,
end:null,el:null,elsByFill:null,externalDragStartProxy:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,constructor:function(a){this.view=a;this.isRTL=a.opt("isRTL");this.elsByFill={};this.externalDragStartProxy=C(this,"externalDragStart")},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(a){this.start=a.start.clone();
this.end=a.end.clone();this.rangeUpdated();this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var a=this.view,b;this.eventTimeFormat=a.opt("eventTimeFormat")||a.opt("timeFormat")||this.computeEventTimeFormat();b=a.opt("displayEventTime");null==b&&(b=this.computeDisplayEventTime());a=a.opt("displayEventEnd");null==a&&(a=this.computeDisplayEventEnd());this.displayEventTime=b;this.displayEventEnd=a},spanToSegs:function(a){},diffDates:function(a,b){return this.largeUnit?
q.duration(Math.round(a.diff(b,this.largeUnit,!0)),this.largeUnit):Da(a,b)},prepareHits:function(){},releaseHits:function(){},queryHit:function(a,b){},getHitSpan:function(a){},getHitEl:function(a){},setElement:function(a){var b=this;this.el=a;a.on("mousedown",function(a){!g(a.target).is(".fc-event-container *, .fc-more")&&!g(a.target).closest(".fc-popover").length&&b.dayMousedown(a)});this.bindSegHandlers();this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers();this.el.remove()},
renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){g(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){g(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(a){var b=this,c=this.view,d=c.opt("selectable"),e,f;(new ba(this,{scroll:c.opt("dragScroll"),dragStart:function(){c.unselect()},hitOver:function(a,c,g){g&&(e=c?a:null,d&&((f=b.computeSelection(b.getHitSpan(g),
b.getHitSpan(a)))?b.renderSelection(f):!1===f&&U()))},hitOut:function(){f=e=null;b.unrenderSelection();R()},listenStop:function(a){e&&c.triggerDayClick(b.getHitSpan(e),b.getHitEl(e),a);f&&c.reportSelection(f,a);R()}})).mousedown(a)},renderEventLocationHelper:function(a,b){var c=this.fabricateHelperEvent(a,b);this.renderHelper(c,b)},fabricateHelperEvent:function(a,b){var c=b?W(b.event):{};c.start=a.start.clone();c.end=a.end?a.end.clone():null;c.allDay=null;this.view.calendar.normalizeEventDates(c);
c.className=(c.className||[]).concat("fc-helper");b||(c.editable=!1);return c},renderHelper:function(a,b){},unrenderHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(a,b){var c=this.computeSelectionSpan(a,b);return c&&!this.view.calendar.isSelectionSpanAllowed(c)?!1:c},computeSelectionSpan:function(a,b){var c=[a.start,a.end,b.start,b.end];c.sort(bb);return{start:c[0].clone(),end:c[3].clone()}},
renderHighlight:function(a){this.renderFill("highlight",this.spanToSegs(a))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a,b){},unrenderFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(a,b){var c=this,d=this[a+"SegEl"],e="",f=[],h;if(b.length){for(h=0;h<b.length;h++)e+=this.fillSegHtml(a,b[h]);g(e).each(function(a,e){var h=b[a],k=g(e);d&&(k=d.call(c,
h,k));k&&(k=g(k),k.is(c.fillSegTag)&&(h.el=k,f.push(h)))})}return f},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegCss"],c=c?c.call(this,b):[],d=Z(d?d.call(this,b):{});return"<"+this.fillSegTag+(c.length?' class="'+c.join(" ")+'"':"")+(d?' style="'+d+'"':"")+" />"},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),d=["fc-"+Ta[a.day()]];1==b.intervalDuration.as("months")&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month");a.isSame(c,
"day")?d.push("fc-today",b.highlightStateClass):a<c?d.push("fc-past"):d.push("fc-future");return d}});O.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(a){var b=[],c=[],d;for(d=0;d<a.length;d++){var e=F((a[d].source||{}).rendering,a[d].rendering);("background"===e||"inverse-background"===e?b:c).push(a[d])}this.segs=[].concat(this.renderBgEvents(b),this.renderFgEvents(c))},renderBgEvents:function(a){a=this.eventsToSegs(a);return this.renderBgSegs(a)||
a},renderFgEvents:function(a){a=this.eventsToSegs(a);return this.renderFgSegs(a)||a},unrenderEvents:function(){this.triggerSegMouseout();this.unrenderFgSegs();this.unrenderBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},unrenderFgSegs:function(){},renderFgSegEls:function(a,b){var c=this.view,d="",e=[],f;if(a.length){for(f=0;f<a.length;f++)d+=this.fgSegHtml(a[f],b);g(d).each(function(b,d){var f=a[b],u=c.resolveEventEl(f.event,g(d));u&&(u.data("fc-seg",
f),f.el=u,e.push(f))})}return e},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){a=a.event;return["fc-bgevent"].concat(a.className,(a.source||{}).className||[])},bgEventSegCss:function(a){var b=this.view;a=a.event;var c=a.source||{};return{"background-color":a.backgroundColor||a.color||c.backgroundColor||
c.color||b.opt("eventBackgroundColor")||b.opt("eventColor")}},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var a=this,b=this.view;g.each({mouseenter:function(b,d){a.triggerSegMouseover(b,d)},mouseleave:function(b,d){a.triggerSegMouseout(b,d)},click:function(a,d){return b.trigger("eventClick",this,a.event,d)},mousedown:function(c,d){g(d.target).is(".fc-resizer")&&b.isEventResizable(c.event)?a.segResizeMousedown(c,d,g(d.target).is(".fc-start-resizer")):
b.isEventDraggable(c.event)&&a.segDragMousedown(c,d)}},function(b,d){a.el.on(b,".fc-event-container > *",function(b){var c=g(this).data("fc-seg");if(c&&!a.isDraggingSeg&&!a.isResizingSeg)return d.call(this,c,b)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{};this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,
b))},segDragMousedown:function(a,b){var c=this,d=this.view,e=d.calendar,f=a.el,h=a.event,g,l=new rb(a.el,{parentEl:d.el,opacity:d.opt("dragOpacity"),revertDuration:d.opt("dragRevertDuration"),zIndex:2});(new ba(d,{distance:5,scroll:d.opt("dragScroll"),subjectEl:f,subjectCenter:!0,listenStart:function(a){l.hide();l.start(a)},dragStart:function(b){c.triggerSegMouseout(a,b);c.segDragStart(a,b);d.hideEvent(h)},hitOver:function(b,f,p){a.hit&&(p=a.hit);if((g=c.computeEventDrop(p.component.getHitSpan(p),
b.component.getHitSpan(b),h))&&!e.isEventSpanAllowed(c.eventToSpan(g),h))U(),g=null;g&&d.renderDrag(g,a)?l.hide():l.show();f&&(g=null)},hitOut:function(){d.unrenderDrag();l.show();g=null},hitDone:function(){R()},dragStop:function(b){l.stop(!g,function(){d.unrenderDrag();d.showEvent(h);c.segDragStop(a,b);g&&d.reportEventDrop(h,g,this.largeUnit,f,b)})},listenStop:function(){l.stop()}})).mousedown(b)},segDragStart:function(a,b){this.isDraggingSeg=!0;this.view.trigger("eventDragStart",a.el[0],a.event,
b,{})},segDragStop:function(a,b){this.isDraggingSeg=!1;this.view.trigger("eventDragStop",a.el[0],a.event,b,{})},computeEventDrop:function(a,b,c){var d=this.view.calendar;a=a.start;b=b.start;a.hasTime()===b.hasTime()?(b=this.diffDates(b,a),c.allDay&&M(b)?(c={start:c.start.clone(),end:d.getEventEnd(c),allDay:!1},d.normalizeEventTimes(c)):c={start:c.start.clone(),end:c.end?c.end.clone():null,allDay:c.allDay},c.start.add(b),c.end&&c.end.add(b)):c={start:b.clone(),end:null,allDay:!b.hasTime()};return c},
applyDragOpacity:function(a){var b=this.view.opt("dragOpacity");null!=b&&a.each(function(a,d){d.style.opacity=b})},externalDragStart:function(a,b){var c=this.view,d;if(c.opt("droppable")&&(d=g((b?b.item:null)||a.target),c=c.opt("dropAccept"),g.isFunction(c)?c.call(d[0],d):d.is(c)))this.isDraggingExternal||this.listenToExternalDrag(d,a,b)},listenToExternalDrag:function(a,b,c){var d=this,e=ib(a),f;(new ba(this,{listenStart:function(){d.isDraggingExternal=!0},hitOver:function(a){(f=d.computeExternalDrop(a.component.getHitSpan(a),
e))?d.renderDrag(f):U()},hitOut:function(){f=null;d.unrenderDrag();R()},dragStop:function(){d.unrenderDrag();R();f&&d.view.reportExternalDrop(e,f,a,b,c)},listenStop:function(){d.isDraggingExternal=!1}})).startDrag(b)},computeExternalDrop:function(a,b){var c=this.view.calendar,d={start:c.applyTimezone(a.start),end:null};b.startTime&&!d.start.hasTime()&&d.start.time(b.startTime);b.duration&&(d.end=d.start.clone().add(b.duration));return!c.isExternalSpanAllowed(this.eventToSpan(d),d,b.eventProps)?null:
d},renderDrag:function(a,b){},unrenderDrag:function(){},segResizeMousedown:function(a,b,c){var d=this,e=this.view,f=e.calendar,h=a.el,g=a.event,l=f.getEventEnd(g),u;(new ba(this,{distance:5,scroll:e.opt("dragScroll"),subjectEl:h,dragStart:function(b){d.triggerSegMouseout(a,b);d.segResizeStart(a,b)},hitOver:function(b,h,n){h=d.getHitSpan(n);b=d.getHitSpan(b);if(u=c?d.computeEventStartResize(h,b,g):d.computeEventEndResize(h,b,g))f.isEventSpanAllowed(d.eventToSpan(u),g)?u.start.isSame(g.start)&&u.end.isSame(l)&&
(u=null):(U(),u=null);u&&(e.hideEvent(g),d.renderEventResize(u,a))},hitOut:function(){u=null},hitDone:function(){d.unrenderEventResize();e.showEvent(g);R()},dragStop:function(b){d.segResizeStop(a,b);u&&e.reportEventResize(g,u,this.largeUnit,h,b)}})).mousedown(b)},segResizeStart:function(a,b){this.isResizingSeg=!0;this.view.trigger("eventResizeStart",a.el[0],a.event,b,{})},segResizeStop:function(a,b){this.isResizingSeg=!1;this.view.trigger("eventResizeStop",a.el[0],a.event,b,{})},computeEventStartResize:function(a,
b,c){return this.computeEventResize("start",a,b,c)},computeEventEndResize:function(a,b,c){return this.computeEventResize("end",a,b,c)},computeEventResize:function(a,b,c,d){var e=this.view.calendar;c=this.diffDates(c[a],b[a]);b={start:d.start.clone(),end:e.getEventEnd(d),allDay:d.allDay};b.allDay&&M(c)&&(b.allDay=!1,e.normalizeEventTimes(b));b[a].add(c);b.start.isBefore(b.end)||(d=this.minResizeDuration||(d.allDay?e.defaultAllDayEventDuration:e.defaultTimedEventDuration),"start"==a?b.start=b.end.clone().subtract(d):
b.end=b.start.clone().add(d));return b},renderEventResize:function(a,b){},unrenderEventResize:function(){},getEventTimeText:function(a,b,c){null==b&&(b=this.eventTimeFormat);null==c&&(c=this.displayEventEnd);return this.displayEventTime&&a.start.hasTime()?c&&a.end?this.view.formatRange(a,b):a.start.format(b):""},getSegClasses:function(a,b,c){var d=a.event;a=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);b&&a.push("fc-draggable");
c&&a.push("fc-resizable");return a},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor");return{"background-color":a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f,"border-color":a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f,color:a.textColor||c.textColor||b.opt("eventTextColor")}},eventToSegs:function(a){return this.eventsToSegs([a])},eventToSpan:function(a){var b=this.eventToRange(a);this.transformEventSpan(b,
a);return b},eventsToSegs:function(a,b){var c=this,d=gb(a),e=[];g.each(d,function(a,d){var g=[],l;for(l=0;l<d.length;l++)g.push(c.eventToRange(d[l]));if("inverse-background"===F((d[0].source||{}).rendering,d[0].rendering)){g=c.invertRanges(g);for(l=0;l<g.length;l++)c.generateEventSegs(g[l],d[0],b,e)}else for(l=0;l<g.length;l++)c.generateEventSegs(g[l],d[l],b,e)});return e},eventToRange:function(a){return{start:a.start.clone().stripZone(),end:this.view.calendar.getEventEnd(a).stripZone()}},generateEventSegs:function(a,
b,c,d){var e;this.transformEventSpan(a,b);c=c?c(a):this.spanToSegs(a);for(e=0;e<c.length;e++)this.transformEventSeg(c[e],a,b),d.push(c[e])},transformEventSpan:function(a,b){},transformEventSeg:function(a,b,c){a.event=c;a.eventStartMS=+b.start;a.eventDurationMS=b.end-b.start},invertRanges:function(a){var b=this.view,c=b.start.clone(),b=b.end.clone(),d=[],e,f;a.sort(hb);for(e=0;e<a.length;e++)f=a[e],f.start>c&&d.push({start:c,end:f.start}),c=f.end;c<b&&d.push({start:c,end:b});return d},sortEventSegs:function(a){a.sort(C(this,
"compareEventSegs"))},compareEventSegs:function(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||Aa(a.event,b.event,this.view.eventOrderSpecs)}});n.dataAttrPrefix="";var Wa=n.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var a=this.view,b=this.start.clone(),c=-1,d=[],e=[];b.isBefore(this.end);)a.isHiddenDay(b)?d.push(c+0.5):(c++,d.push(c),
e.push(b.clone())),b.add(1,"days");if(this.breakOnWeeks){b=e[0].day();for(a=1;a<e.length&&e[a].day()!=b;a++);b=Math.ceil(e.length/a)}else b=1,a=e.length;this.dayDates=e;this.dayIndices=d;this.daysPerRow=a;this.rowCnt=b;this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt();this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(a,b){return this.dayDates[this.getCellDayIndex(a,
b)].clone()},getCellRange:function(a,b){var c=this.getCellDate(a,b),d=c.clone().add(1,"days");return{start:c,end:d}},getCellDayIndex:function(a,b){return a*this.daysPerRow+this.getColDayIndex(b)},getColDayIndex:function(a){return this.isRTL?this.colCnt-1-a:a},getDateDayIndex:function(a){var b=this.dayIndices;a=a.diff(this.start,"days");return 0>a?b[0]-1:a>=b.length?b[b.length-1]+1:b[a]},computeColHeadFormat:function(){return 1<this.rowCnt||10<this.colCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):
"dddd"},sliceRangeByRow:function(a){var b=this.daysPerRow,c=this.view.computeDayRange(a);a=this.getDateDayIndex(c.start);var c=this.getDateDayIndex(c.end.clone().subtract(1,"days")),d=[],e,f,g,m;for(e=0;e<this.rowCnt;e++)f=e*b,g=f+b-1,m=Math.max(a,f),g=Math.min(c,g),m=Math.ceil(m),g=Math.floor(g),m<=g&&d.push({row:e,firstRowDayIndex:m-f,lastRowDayIndex:g-f,isStart:m===a,isEnd:g===c});return d},sliceRangeByDay:function(a){var b=this.daysPerRow,c=this.view.computeDayRange(a);a=this.getDateDayIndex(c.start);
var c=this.getDateDayIndex(c.end.clone().subtract(1,"days")),d=[],e,f,g,m,l,n;for(e=0;e<this.rowCnt;e++){f=e*b;g=f+b-1;for(m=f;m<=g;m++)l=Math.max(a,m),n=Math.min(c,m),l=Math.ceil(l),n=Math.floor(n),l<=n&&d.push({row:e,firstRowDayIndex:l-f,lastRowDayIndex:n-f,isStart:l===a,isEnd:n===c})}return d},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},
renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var a=[],b,c;for(b=0;b<this.colCnt;b++)c=this.getCellDate(0,b),a.push(this.renderHeadDateCellHtml(c));return a.join("")},renderHeadDateCellHtml:function(a,b){return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+Ta[a.day()]+'"'+(1<b?' colspan="'+b+'"':"")+">"+x(a.format(this.colHeadFormat))+
"</th>"},renderBgTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(a))+this.renderBgCellsHtml(a)+(this.isRTL?this.renderBgIntroHtml(a):"")+"</tr>"},renderBgIntroHtml:function(a){return this.renderIntroHtml()},renderBgCellsHtml:function(a){var b=[],c,d;for(c=0;c<this.colCnt;c++)d=this.getCellDate(a,c),b.push(this.renderBgCellHtml(d));return b.join("")},renderBgCellHtml:function(a){var b=this.view,c=this.getDayClasses(a);c.unshift("fc-day",b.widgetContentClass);return'<td class="'+
c.join(" ")+'" data-date="'+a.format("YYYY-MM-DD")+'"></td>'},renderIntroHtml:function(){},bookendCells:function(a){var b=this.renderIntroHtml();b&&(this.isRTL?a.append(b):a.prepend(b))}},ca=n.DayGrid=O.extend(Wa,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(a){var b=this.view,c=this.rowCnt,d=this.colCnt,e="",f;for(f=0;f<c;f++)e+=this.renderDayRowHtml(f,a);this.el.html(e);this.rowEls=this.el.find(".fc-row");
this.cellEls=this.el.find(".fc-day");this.rowCoordCache=new aa({els:this.rowEls,isVertical:!0});this.colCoordCache=new aa({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0});for(f=0;f<c;f++)for(a=0;a<d;a++)b.trigger("dayRender",null,this.getCellDate(f,a),this.getCellEl(f,a))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(!0),a=this.eventsToSegs(a);this.renderFill("businessHours",a,"bgevent")},renderDayRowHtml:function(a,
b){var c=["fc-row","fc-week",this.view.widgetContentClass];b&&c.push("fc-rigid");return'<div class="'+c.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(a)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(a))+this.renderNumberCellsHtml(a)+(this.isRTL?this.renderNumberIntroHtml(a):"")+"</tr>"},renderNumberIntroHtml:function(a){return this.renderIntroHtml()},
renderNumberCellsHtml:function(a){var b=[],c,d;for(c=0;c<this.colCnt;c++)d=this.getCellDate(a,c),b.push(this.renderNumberCellHtml(d));return b.join("")},renderNumberCellHtml:function(a){var b;if(!this.view.dayNumbersVisible)return"<td/>";b=this.getDayClasses(a);b.unshift("fc-day-number");return'<td class="'+b.join(" ")+'" data-date="'+a.format()+'">'+a.date()+"</td>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},
rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(a){a=this.sliceRangeByRow(a);var b,c;for(b=0;b<a.length;b++)c=a[b],this.isRTL?(c.leftCol=this.daysPerRow-1-c.lastRowDayIndex,c.rightCol=this.daysPerRow-1-c.firstRowDayIndex):(c.leftCol=c.firstRowDayIndex,c.rightCol=c.lastRowDayIndex);return a},prepareHits:function(){this.colCoordCache.build();this.rowCoordCache.build();this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear();
this.rowCoordCache.clear()},queryHit:function(a,b){var c=this.colCoordCache.getHorizontalIndex(a),d=this.rowCoordCache.getVerticalIndex(b);if(null!=d&&null!=c)return this.getCellHit(d,c)},getHitSpan:function(a){return this.getCellRange(a.row,a.col)},getHitEl:function(a){return this.getCellEl(a.row,a.col)},getCellHit:function(a,b){return{row:a,col:b,component:this,left:this.colCoordCache.getLeftOffset(b),right:this.colCoordCache.getRightOffset(b),top:this.rowCoordCache.getTopOffset(a),bottom:this.rowCoordCache.getBottomOffset(a)}},
getCellEl:function(a,b){return this.cellEls.eq(a*this.colCnt+b)},renderDrag:function(a,b){this.renderHighlight(this.eventToSpan(a));if(b&&!b.el.closest(this.el).length)return this.renderEventLocationHelper(a,b),this.applyDragOpacity(this.helperEls),!0},unrenderDrag:function(){this.unrenderHighlight();this.unrenderHelper()},renderEventResize:function(a,b){this.renderHighlight(this.eventToSpan(a));this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHighlight();this.unrenderHelper()},
renderHelper:function(a,b){var c=[],d=this.eventToSegs(a),e,d=this.renderFgSegEls(d);e=this.renderSegRows(d);this.rowEls.each(function(a,d){var m=g(d),l=g('<div class="fc-helper-skeleton"><table/></div>'),n;n=b&&b.row===a?b.el.position().top:m.find(".fc-content-skeleton tbody").position().top;l.css("top",n).find("table").append(e[a].tbodyEl);m.append(l);c.push(l[0])});this.helperEls=g(c)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(a,
b,c){var d=[],e,f,h;b=this.renderFillSegEls(a,b);for(e=0;e<b.length;e++)f=b[e],h=this.renderFillRow(a,f,c),this.rowEls.eq(f.row).append(h),d.push(h[0]);this.elsByFill[a]=g(d);return b},renderFillRow:function(a,b,c){var d=this.colCnt,e=b.leftCol,f=b.rightCol+1;c=c||a.toLowerCase();a=g('<div class="fc-'+c+'-skeleton"><table><tr/></table></div>');c=a.find("tr");0<e&&c.append('<td colspan="'+e+'"/>');c.append(b.el.attr("colspan",f-e));f<d&&c.append('<td colspan="'+(d-f)+'"/>');this.bookendCells(c);return a}});
ca.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover();O.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return O.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(a){a=g.grep(a,function(a){return a.event.allDay});return O.prototype.renderBgSegs.call(this,a)},renderFgSegs:function(a){var b;a=this.renderFgSegEls(a);b=this.rowStructs=this.renderSegRows(a);this.rowEls.each(function(a,d){g(d).find(".fc-content-skeleton > table").append(b[a].tbodyEl)});
return a},unrenderFgSegs:function(){for(var a=this.rowStructs||[],b;b=a.pop();)b.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b=[],c;a=this.groupSegRows(a);for(c=0;c<a.length;c++)b.push(this.renderSegRow(c,a[c]));return b},fgSegHtml:function(a,b){var c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&d.allDay&&a.isStart&&c.isEventResizableFromStart(d),c=!b&&d.allDay&&a.isEnd&&c.isEventResizableFromEnd(d),e=this.getSegClasses(a,e,f||c),g=Z(this.getEventSkinCss(d)),m="",l;e.unshift("fc-day-grid-event",
"fc-h-event");a.isStart&&(l=this.getEventTimeText(d))&&(m='<span class="fc-time">'+x(l)+"</span>");l='<span class="fc-title">'+(x(d.title||"")||"&nbsp;")+"</span>";return'<a class="'+e.join(" ")+'"'+(d.url?' href="'+x(d.url)+'"':"")+(g?' style="'+g+'"':"")+'><div class="fc-content">'+(this.isRTL?l+" "+m:m+" "+l)+"</div>"+(f?'<div class="fc-resizer fc-start-resizer" />':"")+(c?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(a,b){function c(a){for(;q<a;)(A=(n[k-1]||[])[q])?
A.attr("rowspan",parseInt(A.attr("rowspan")||1,10)+1):(A=g("<td/>"),t.append(A)),l[k][q]=A,n[k][q]=A,q++}var d=this.colCnt,e=this.buildSegLevels(b),f=Math.max(1,e.length),h=g("<tbody/>"),m=[],l=[],n=[],k,p,q,t,v,z,A;for(k=0;k<f;k++){p=e[k];q=0;t=g("<tr/>");m.push([]);l.push([]);n.push([]);if(p)for(v=0;v<p.length;v++){z=p[v];c(z.leftCol);A=g('<td class="fc-event-container"/>').append(z.el);for(z.leftCol!=z.rightCol?A.attr("colspan",z.rightCol-z.leftCol+1):n[k][q]=A;q<=z.rightCol;)l[k][q]=A,m[k][q]=
z,q++;t.append(A)}c(d);this.bookendCells(t);h.append(t)}return{row:a,tbodyEl:h,cellMatrix:l,segMatrix:m,segLevels:e,segs:b}},buildSegLevels:function(a){var b=[],c,d,e;this.sortEventSegs(a);for(c=0;c<a.length;c++){d=a[c];for(e=0;e<b.length;e++){var f;a:{f=b[e];for(var g=void 0,m=void 0,g=0;g<f.length;g++)if(m=f[g],m.leftCol<=d.rightCol&&m.rightCol>=d.leftCol){f=!0;break a}f=!1}if(!f)break}d.level=e;(b[e]||(b[e]=[])).push(d)}for(e=0;e<b.length;e++)b[e].sort(jb);return b},groupSegRows:function(a){var b=
[],c;for(c=0;c<this.rowCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].row].push(a[c]);return b}});ca.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b=this.rowStructs||[],c,d;for(c=0;c<b.length;c++)this.unlimitRow(c),d=a?"number"===typeof a?a:this.computeRowLevelLimit(c):!1,!1!==d&&this.limitRow(c,d)},computeRowLevelLimit:function(a){function b(a,b){f=Math.max(f,g(b).outerHeight())}var c=this.rowEls.eq(a).height();
a=this.rowStructs[a].tbodyEl.children();var d,e,f;for(d=0;d<a.length;d++)if(e=a.eq(d).removeClass("fc-limited"),f=0,e.find("> td > :first-child").each(b),e.position().top+f>c)return d;return!1},limitRow:function(a,b){function c(c){for(;h<c;)q=d.getCellSegs(a,h,b),q.length&&(z=l[b-1][h],s=d.renderMoreLink(a,h,q),w=g("<div/>").append(s),z.append(w),f.push(w[0])),h++}var d=this,e=this.rowStructs[a],f=[],h=0,m,l,n,k,p,q,t,v,z,A,r,x,w,s;if(b&&b<e.segLevels.length){m=e.segLevels[b-1];l=e.cellMatrix;n=e.tbodyEl.children().slice(b).addClass("fc-limited").get();
for(k=0;k<m.length;k++){p=m[k];c(p.leftCol);v=[];for(t=0;h<=p.rightCol;)q=this.getCellSegs(a,h,b),v.push(q),t+=q.length,h++;if(t){z=l[b-1][p.leftCol];t=z.attr("rowspan")||1;A=[];for(r=0;r<v.length;r++)x=g('<td class="fc-more-cell"/>').attr("rowspan",t),q=v[r],s=this.renderMoreLink(a,p.leftCol+r,[p].concat(q)),w=g("<div/>").append(s),x.append(w),A.push(x[0]),f.push(x[0]);z.addClass("fc-limited").after(g(A));n.push(z[0])}}c(this.colCnt);e.moreEls=g(f);e.limitedEls=g(n)}},unlimitRow:function(a){a=this.rowStructs[a];
a.moreEls&&(a.moreEls.remove(),a.moreEls=null);a.limitedEls&&(a.limitedEls.removeClass("fc-limited"),a.limitedEls=null)},renderMoreLink:function(a,b,c){var d=this,e=this.view;return g('<a class="fc-more"/>').text(this.getMoreLinkText(c.length)).on("click",function(f){var h=e.opt("eventLimitClick"),m=d.getCellDate(a,b),l=g(this),n=d.getCellEl(a,b),k=d.getCellSegs(a,b),k=d.resliceDaySegs(k,m),p=d.resliceDaySegs(c,m);"function"===typeof h&&(h=e.trigger("eventLimitClick",null,{date:m,dayEl:n,moreEl:l,
segs:k,hiddenSegs:p},f));"popover"===h?d.showSegPopover(a,b,l,k):"string"===typeof h&&e.calendar.zoomTo(m,h)})},showSegPopover:function(a,b,c,d){var e=this,f=this.view;c=c.parent();var g;g=1==this.rowCnt?f.el:this.rowEls.eq(a);a={className:"fc-more-popover",content:this.renderSegPopoverContent(a,b,d),parentEl:this.el,top:g.offset().top,autoHide:!0,viewportConstrain:f.opt("popoverViewportConstrain"),hide:function(){e.segPopover.removeElement();e.segPopover=null;e.popoverSegs=null}};this.isRTL?a.right=
c.offset().left+c.outerWidth()+1:a.left=c.offset().left-1;this.segPopover=new qb(a);this.segPopover.show()},renderSegPopoverContent:function(a,b,c){var d=this.view,e=d.opt("theme"),f=this.getCellDate(a,b).format(d.opt("dayPopoverFormat")),d=g('<div class="fc-header '+d.widgetHeaderClass+'"><span class="fc-close '+(e?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+x(f)+'</span><div class="fc-clear"/></div><div class="fc-body '+d.widgetContentClass+'"><div class="fc-event-container"></div></div>'),
e=d.find(".fc-event-container");this.popoverSegs=c=this.renderFgSegEls(c,!0);for(f=0;f<c.length;f++)this.prepareHits(),c[f].hit=this.getCellHit(a,b),this.releaseHits(),e.append(c[f].el);return d},resliceDaySegs:function(a,b){var c=g.map(a,function(a){return a.event}),d=b.clone(),e=d.clone().add(1,"days"),f={start:d,end:e};a=this.eventsToSegs(c,function(a){return(a=ha(a,f))?[a]:[]});this.sortEventSegs(a);return a},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"===
typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b,c){a=this.rowStructs[a].segMatrix;c=c||0;for(var d=[],e;c<a.length;)(e=a[c][b])&&d.push(e),c++;return d}});var Ya=n.TimeGrid=O.extend(Wa,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatEls:null,helperEl:null,colCoordCache:null,slatCoordCache:null,businessHourSegs:null,constructor:function(){O.apply(this,arguments);this.processOptions()},renderDates:function(){this.el.html(this.renderHtml());
this.colEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.colCoordCache=new aa({els:this.colEls,isHorizontal:!0});this.slatCoordCache=new aa({els:this.slatEls,isVertical:!0})},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+
"</table></div>"},renderSlatRowHtml:function(){for(var a=this.view,b=this.isRTL,c="",d=q.duration(+this.minTime),e,f;d<this.maxTime;)e=this.start.clone().time(d),f=G(ka(d,this.labelInterval)),e='<td class="fc-axis fc-time '+a.widgetContentClass+'" '+a.axisStyleAttr()+">"+(f?"<span>"+x(e.format(this.labelFormat))+"</span>":"")+"</td>",c+="<tr "+(f?"":'class="fc-minor"')+">"+(!b?e:"")+'<td class="'+a.widgetContentClass+'"/>'+(b?e:"")+"</tr>",d.add(this.slotDuration);return c},processOptions:function(){var a=
this.view,b=a.opt("slotDuration"),c=a.opt("snapDuration"),b=q.duration(b),c=c?q.duration(c):b;this.slotDuration=b;this.snapDuration=c;this.snapsPerSlot=b/c;this.minResizeDuration=c;this.minTime=q.duration(a.opt("minTime"));this.maxTime=q.duration(a.opt("maxTime"));c=a.opt("slotLabelFormat");g.isArray(c)&&(c=c[c.length-1]);this.labelFormat=c||a.opt("axisFormat")||a.opt("smallTimeFormat");this.labelInterval=(c=a.opt("slotLabelInterval"))?q.duration(c):this.computeLabelInterval(b)},computeLabelInterval:function(a){var b,
c,d;for(b=Xa.length-1;0<=b;b--)if(c=q.duration(Xa[b]),d=ka(c,a),G(d)&&1<d)return c;return q.duration(a)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build();this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(a,b){var c=this.snapsPerSlot,d=this.colCoordCache,e=this.slatCoordCache,f=d.getHorizontalIndex(a),g=e.getVerticalIndex(b);if(null!=
f&&null!=g){var m=e.getTopOffset(g),l=e.getHeight(g),e=Math.floor((b-m)/l*c),n=m+e/c*l,m=m+(e+1)/c*l;return{col:f,snap:g*c+e,component:this,left:d.getLeftOffset(f),right:d.getRightOffset(f),top:n,bottom:m}}},getHitSpan:function(a){var b=this.getCellDate(0,a.col);a=this.computeSnapTime(a.snap);b.time(a);a=b.clone().add(this.snapDuration);return{start:b,end:a}},getHitEl:function(a){return this.colEls.eq(a.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(a){return q.duration(this.minTime+
this.snapDuration*a)},spanToSegs:function(a){a=this.sliceRangeByTimes(a);var b;for(b=0;b<a.length;b++)a[b].col=this.isRTL?this.daysPerRow-1-a[b].dayIndex:a[b].dayIndex;return a},sliceRangeByTimes:function(a){var b=[],c,d;for(d=0;d<this.daysPerRow;d++)if(c=this.dayDates[d].clone(),c={start:c.clone().time(this.minTime),end:c.clone().time(this.maxTime)},c=ha(a,c))c.dayIndex=d,b.push(c);return b},updateSize:function(a){this.slatCoordCache.build();a&&this.updateSegVerticals()},computeDateTop:function(a,
b){return this.computeTimeTop(q.duration(a-b.clone().stripTime()))},computeTimeTop:function(a){var b=this.slatEls.length,c=(a-this.minTime)/this.slotDuration,c=Math.max(0,c),c=Math.min(b,c);a=Math.floor(c);a=Math.min(a,b-1);b=c-a;return this.slatCoordCache.getTopPosition(a)+this.slatCoordCache.getHeight(a)*b},renderDrag:function(a,b){if(b)return this.renderEventLocationHelper(a,b),this.applyDragOpacity(this.helperEl),!0;this.renderHighlight(this.eventToSpan(a))},unrenderDrag:function(){this.unrenderHelper();
this.unrenderHighlight()},renderEventResize:function(a,b){this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(a,b){var c=this.eventToSegs(a),d,e,f,h,c=this.renderFgSegEls(c);d=this.renderSegTable(c);for(e=0;e<c.length;e++)f=c[e],b&&b.col===f.col&&(h=b.el,f.el.css({left:h.css("left"),right:h.css("right"),"margin-left":h.css("margin-left"),"margin-right":h.css("margin-right")}));this.helperEl=g('<div class="fc-helper-skeleton"/>').append(d).appendTo(this.el)},
unrenderHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderEventLocationHelper(a):this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHelper();this.unrenderHighlight()},renderFill:function(a,b,c){var d,e,f,h,m,l,n,k,p;if(b.length){b=this.renderFillSegEls(a,b);d=this.groupSegCols(b);c=c||a.toLowerCase();e=g('<div class="fc-'+c+'-skeleton"><table><tr/></table></div>');f=e.find("tr");for(h=
0;h<d.length;h++)if(m=d[h],l=g("<td/>").appendTo(f),m.length){l=g('<div class="fc-'+c+'-container"/>').appendTo(l);n=this.getCellDate(0,h);for(k=0;k<m.length;k++)p=m[k],l.append(p.el.css({top:this.computeDateTop(p.start,n),bottom:-this.computeDateTop(p.end,n)}))}this.bookendCells(f);this.el.append(e);this.elsByFill[a]=e}return b}});Ya.mixin({eventSkeletonEl:null,renderFgSegs:function(a){a=this.renderFgSegEls(a);this.el.append(this.eventSkeletonEl=g('<div class="fc-content-skeleton"/>').append(this.renderSegTable(a)));
return a},unrenderFgSegs:function(a){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(a){var b=g("<table><tr/></table>"),c=b.find("tr"),d,e,f,h,m;d=this.groupSegCols(a);this.computeSegVerticals(a);for(f=0;f<d.length;f++){h=d[f];this.placeSlotSegs(h);m=g('<div class="fc-event-container"/>');for(a=0;a<h.length;a++)e=h[a],e.el.css(this.generateSegPositionCss(e)),30>e.bottom-e.top&&e.el.addClass("fc-short"),m.append(e.el);c.append(g("<td/>").append(m))}this.bookendCells(c);
return b},placeSlotSegs:function(a){var b;this.sortEventSegs(a);b=[];var c,d,e;for(c=0;c<a.length;c++){d=a[c];for(e=0;e<b.length&&Qa(d,b[e]).length;e++);d.level=e;(b[e]||(b[e]=[])).push(d)}var f;for(a=0;a<b.length;a++){c=b[a];for(d=0;d<c.length;d++){e=c[d];e.forwardSegs=[];for(f=a+1;f<b.length;f++)Qa(e,b[f],e.forwardSegs)}}if(b=b[0]){for(a=0;a<b.length;a++)Pa(b[a]);for(a=0;a<b.length;a++)this.computeSlotSegCoords(b[a],0,0)}},computeSlotSegCoords:function(a,b,c){var d=a.forwardSegs;if(void 0===a.forwardCoord){d.length?
(this.sortForwardSlotSegs(d),this.computeSlotSegCoords(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1;a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1);for(b=0;b<d.length;b++)this.computeSlotSegCoords(d[b],0,a.forwardCoord)}},updateSegVerticals:function(){var a=(this.segs||[]).concat(this.businessHourSegs||[]),b;this.computeSegVerticals(a);for(b=0;b<a.length;b++)a[b].el.css(this.generateSegVerticalCss(a[b]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=
a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},fgSegHtml:function(a,b){var c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&a.isStart&&c.isEventResizableFromStart(d),g=!b&&a.isEnd&&c.isEventResizableFromEnd(d),e=this.getSegClasses(a,e,f||g),f=Z(this.getEventSkinCss(d)),m,l,n;e.unshift("fc-time-grid-event","fc-v-event");if(c.isMultiDayEvent(d)){if(a.isStart||a.isEnd)m=this.getEventTimeText(a),l=this.getEventTimeText(a,"LT"),n=this.getEventTimeText(a,
null,!1)}else m=this.getEventTimeText(d),l=this.getEventTimeText(d,"LT"),n=this.getEventTimeText(d,null,!1);return'<a class="'+e.join(" ")+'"'+(d.url?' href="'+x(d.url)+'"':"")+(f?' style="'+f+'"':"")+'><div class="fc-content">'+(m?'<div class="fc-time" data-start="'+x(n)+'" data-full="'+x(l)+'"><span>'+x(m)+"</span></div>":"")+(d.title?'<div class="fc-title">'+x(d.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(g?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(a){var b=
this.view.opt("slotEventOverlap"),c=a.backwardCoord,d=a.forwardCoord,e=this.generateSegVerticalCss(a),f;b&&(d=Math.min(1,c+2*(d-c)));this.isRTL?f=1-d:(f=c,c=1-d);e.zIndex=a.level+1;e.left=100*f+"%";e.right=100*c+"%";b&&a.forwardPressure&&(e[this.isRTL?"marginLeft":"marginRight"]=20);return e},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var b=[],c;for(c=0;c<this.colCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].col].push(a[c]);return b},sortForwardSlotSegs:function(a){a.sort(C(this,
"compareForwardSlotSegs"))},compareForwardSlotSegs:function(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||this.compareEventSegs(a,b)}});var T=n.View=D.extend({type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,
widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(a,b,c,d){this.calendar=a;this.type=this.name=b;this.options=c;this.intervalDuration=d||q.duration(1,"day");this.nextDayThreshold=q.duration(this.opt("nextDayThreshold"));this.initThemingProps();this.initHiddenDays();this.isRTL=this.opt("isRTL");this.eventOrderSpecs=za(this.opt("eventOrder"));this.documentMousedownProxy=C(this,"documentMousedown");this.initialize()},
initialize:function(){},opt:function(a){return this.options[a]},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(a){g.extend(this,a);this.updateTitle()},computeRange:function(a){var b=ia(this.intervalDuration);a=a.clone().startOf(b);var c=a.clone().add(this.intervalDuration),d,e;/year|month|week|day/.test(b)?(a.stripTime(),c.stripTime()):
(a.hasTime()||(a=this.calendar.time(0)),c.hasTime()||(c=this.calendar.time(0)));d=a.clone();d=this.skipHiddenDays(d);e=c.clone();e=this.skipHiddenDays(e,-1,!0);return{intervalUnit:b,intervalStart:a,intervalEnd:c,start:d,end:e}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,
b){1>=this.intervalDuration.as("days")&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day"));return a},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?
this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;d.hasTime()||(d=d.clone().subtract(1));return Ka(a.start,d,b,c,this.opt("isRTL"))},setElement:function(a){this.el=a;this.bindGlobalHandlers()},removeElement:function(){this.clear();this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1);this.unbindGlobalHandlers();this.el.remove()},display:function(a){var b=this,c=null;this.displaying&&(c=this.queryScroll());this.calendar.freezeContentHeight();
return this.clear().then(function(){return b.displaying=g.when(b.displayView(a)).then(function(){b.forceScroll(b.computeInitialScroll(c));b.calendar.unfreezeContentHeight();b.triggerRender()})})},clear:function(){var a=this,b=this.displaying;return b?b.then(function(){a.displaying=null;a.clearEvents();return a.clearView()}):g.when()},redisplay:function(){if(this.isSkeletonRendered){var a=this.isEventsRendered;this.clearEvents();this.clearView();this.displayView();a&&this.displayEvents()}},displayView:function(a){this.isSkeletonRendered||
(this.renderSkeleton(),this.isSkeletonRendered=!0);a&&this.setDate(a);this.render&&this.render();this.renderDates();this.updateSize();this.renderBusinessHours()},clearView:function(){this.unselect();this.triggerUnrender();this.unrenderBusinessHours();this.unrenderDates();this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},renderBusinessHours:function(){},unrenderBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",
this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){g(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){g(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header";this.widgetContentClass=a+"-widget-content";this.highlightStateClass=a+"-state-highlight"},updateSize:function(a){var b;a&&(b=
this.queryScroll());this.updateHeight(a);this.updateWidth(a);a&&this.setScroll(b)},updateWidth:function(a){},updateHeight:function(a){a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(a){var b=this.scrollerEl,c;c=this.el.add(b);c.css({position:"relative",left:-1});b=this.el.outerHeight()-b.height();c.css({position:"",left:""});return a-b},computeInitialScroll:function(a){return 0},queryScroll:function(){if(this.scrollerEl)return this.scrollerEl.scrollTop()},
setScroll:function(a){if(this.scrollerEl)return this.scrollerEl.scrollTop(a)},forceScroll:function(a){var b=this;this.setScroll(a);setTimeout(function(){b.setScroll(a)},0)},displayEvents:function(a){var b=this.queryScroll();this.clearEvents();this.renderEvents(a);this.isEventsRendered=!0;this.setScroll(b);this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.isEventsRendered=!1)},renderEvents:function(a){},
unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)});this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(a,b){var c=this.trigger("eventRender",a,a,b);!1===c?b=null:c&&!0!==c&&(b=g(c));return b},showEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility",
"")},a)},hideEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","hidden")},a)},renderedEventSegEach:function(a,b){var c=this.getEventSegs(),d;for(d=0;d<c.length;d++)(!b||c[d].event._id===b._id)&&c[d].el&&a.call(this,c[d])},getEventSegs:function(){return[]},isEventDraggable:function(a){return!1},reportEventDrop:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c);this.triggerEventDrop(a,g.dateDelta,function(){g.undo();f.reportEventChange()},d,e);f.reportEventChange()},
triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(a,b,c,d,e){var f=a.eventProps,h;f&&(f=g.extend({},f,b),h=this.calendar.renderEvent(f,a.stick)[0]);this.triggerExternalDrop(h,b,c,d,e)},triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e);a&&this.trigger("eventReceive",null,a)},renderDrag:function(a,b){},unrenderDrag:function(){},isEventResizableFromStart:function(a){return this.opt("eventResizableFromStart")&&this.isEventResizable(a)},
isEventResizableFromEnd:function(a){return this.isEventResizable(a)},isEventResizable:function(a){var b=a.source||{};return F(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c);this.triggerEventResize(a,g.durationDelta,function(){g.undo();f.reportEventChange()},d,e);f.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",
d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b);this.renderSelection(a);this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,b){this.isSelected=!0;this.triggerSelect(a,b)},triggerSelect:function(a,b){this.trigger("select",null,this.calendar.applyTimezone(a.start),this.calendar.applyTimezone(a.end),b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,
a))},unrenderSelection:function(){},documentMousedown:function(a){var b;this.isSelected&&(this.opt("unselectAuto")&&1==a.which&&!a.ctrlKey)&&(b=this.opt("unselectCancel"),(!b||!g(a.target).closest(b).length)&&this.unselect(a))},triggerDayClick:function(a,b,c){this.trigger("dayClick",b,this.calendar.applyTimezone(a.start),c)},initHiddenDays:function(){var a=this.opt("hiddenDays")||[],b=[],c=0,d;!1===this.opt("weekends")&&a.push(0,6);for(d=0;7>d;d++)(b[d]=-1!==g.inArray(d,a))||c++;if(!c)throw"invalid hiddenDays";
this.isHiddenDayHash=b},isHiddenDay:function(a){q.isMoment(a)&&(a=a.day());return this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){a=a.clone();for(b=b||1;this.isHiddenDayHash[(a.day()+(c?b:0)+7)%7];)a.add(b,"days");return a},computeDayRange:function(a){var b=a.start.clone().stripTime();a=a.end;var c=null,d;a&&(c=a.clone().stripTime(),(d=+a.time())&&d>=this.nextDayThreshold&&c.add(1,"days"));if(!a||c<=b)c=b.clone().add(1,"days");return{start:b,end:c}},isMultiDayEvent:function(a){a=this.computeDayRange(a);
return 1<a.end.diff(a.start,"days")}}),y=n.Calendar=D.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:function(a,b){function c(){return a.is(":visible")}function d(a){G++;s&&(a&&s.type!==a)&&(r.deactivateButton(s.type),l(),s.removeElement(),s=k.view=null);!s&&a&&(s=k.view=C[a]||(C[a]=k.instantiateView(a)),s.setElement(g("<div class='fc-view fc-"+a+"-view' />").appendTo(w)),r.activateButton(a));if(s&&(E=s.massageCurrentDate(E),
(!s.displaying||!E.isWithin(s.intervalStart,s.intervalEnd))&&c()))s.display(E),u(),r.updateTitle(s.title),k.getNow().isWithin(s.intervalStart,s.intervalEnd)?r.disableButton("today"):r.enableButton("today"),!p.lazyFetching||x(s.start,s.end)?z(s.start,s.end):m();u();G--}function e(a){if(c())return a&&f(),G++,s.updateSize(!0),G--,!0}function f(){F="number"===typeof p.contentHeight?p.contentHeight:"number"===typeof p.height?p.height-(y?y.outerHeight(!0):0):Math.round(w.width()/Math.max(p.aspectRatio,
0.5))}function h(a){!G&&a.target===window&&s.start&&e(!0)&&s.trigger("windowResize",A)}function m(){c()&&(l(),s.displayEvents(B),u())}function l(){w.css({width:"100%",height:w.height(),overflow:"hidden"})}function u(){w.css({width:"",height:"",overflow:""})}var k=this;k.initOptions(b||{});var p=this.options;k.render=function(){w?c()&&(c()&&f(),d()):(a.addClass("fc"),p.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),p.theme?a.addClass("ui-widget"):a.addClass("fc-unthemed"),w=g("<div class='fc-view-container'/>").prependTo(a),
r=k.header=new lb(k,p),(y=r.render())&&a.prepend(y),d(p.defaultView),p.handleWindowResize&&(D=la(h,p.windowResizeDelay),g(window).resize(D)))};k.destroy=function(){s&&s.removeElement();r.removeElement();w.remove();a.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");D&&g(window).unbind("resize",D)};k.refetchEvents=function(){l();s.clearEvents();u();z(s.start,s.end)};k.reportEvents=function(a){B=a;m()};k.reportEventChange=function(){m()};k.rerenderEvents=m;k.changeView=d;k.select=function(a,b){s.select(k.buildSelectSpan.apply(k,
arguments))};k.unselect=function(){s&&s.unselect()};k.prev=function(){E=s.computePrevDate(E);d()};k.next=function(){E=s.computeNextDate(E);d()};k.prevYear=function(){E.add(-1,"years");d()};k.nextYear=function(){E.add(1,"years");d()};k.today=function(){E=k.getNow();d()};k.gotoDate=function(a){E=k.moment(a).stripZone();d()};k.incrementDate=function(a){E.add(q.duration(a));d()};k.zoomTo=function(a,b){var c;b=b||"day";c=k.getViewSpec(b)||k.getUnitViewSpec(b);E=a.clone();d(c?c.type:null)};k.getDate=function(){return k.applyTimezone(E)};
k.getCalendar=function(){return k};k.getView=function(){return s};k.option=function(a,b){if(void 0===b)return p[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)p[a]=b,e(!0)};k.trigger=function(a,b){var c=Array.prototype.slice.call(arguments,2);b=b||A;this.triggerWith(a,b,c);if(p[a])return p[a].apply(b,c)};var t=W(Sa(p.lang));p.monthNames&&(t._months=p.monthNames);p.monthNamesShort&&(t._monthsShort=p.monthNamesShort);p.dayNames&&(t._weekdays=p.dayNames);p.dayNamesShort&&(t._weekdaysShort=p.dayNamesShort);
if(null!=p.firstDay){var v=W(t._week);v.dow=p.firstDay;t._week=v}t._fullCalendar_weekCalc=function(a){if("function"===typeof a||"local"===a)return a;if("iso"===a||"ISO"===a)return"ISO"}(p.weekNumberCalculation);k.defaultAllDayEventDuration=q.duration(p.defaultAllDayEventDuration);k.defaultTimedEventDuration=q.duration(p.defaultTimedEventDuration);k.moment=function(){var a;"local"===p.timezone?(a=n.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===p.timezone?n.moment.utc.apply(null,arguments):
n.moment.parseZone.apply(null,arguments);"_locale"in a?a._locale=t:a._lang=t;return a};k.getIsAmbigTimezone=function(){return"local"!==p.timezone&&"UTC"!==p.timezone};k.applyTimezone=function(a){if(!a.hasTime())return a.clone();var b=k.moment(a.toArray()),c=a.time()-b.time();c&&(c=b.clone().add(c),0===a.time()-c.time()&&(b=c));return b};k.getNow=function(){var a=p.now;"function"===typeof a&&(a=a());return k.moment(a).stripZone()};k.getEventEnd=function(a){return a.end?a.end.clone():k.getDefaultEventEnd(a.allDay,
a.start)};k.getDefaultEventEnd=function(a,b){var c=b.clone();a?c.stripTime().add(k.defaultAllDayEventDuration):c.add(k.defaultTimedEventDuration);k.getIsAmbigTimezone()&&c.stripZone();return c};k.humanizeDuration=function(a){return(a.locale||a.lang).call(a,p.lang).humanize()};mb.call(k,p);var x=k.isFetchNeeded,z=k.fetchEvents,A=a[0],r,y,w,s,C={},F,D,G=0,B=[],E;E=null!=p.defaultDate?k.moment(p.defaultDate).stripZone():k.getNow();k.getSuggestedViewHeight=function(){void 0===F&&c()&&f();return F};k.isHeightAuto=
function(){return"auto"===p.contentHeight||"auto"===p.height};k.freezeContentHeight=l;k.unfreezeContentHeight=u;k.initialize()},initialize:function(){},initOptions:function(a){var b,c;a=Za(a);b=a.lang;b=P[b];b||(b=y.defaults.lang,b=P[b]||{});this.dirDefaults=c=F(a.isRTL,b.isRTL,y.defaults.isRTL)?y.rtlDefaults:{};this.langDefaults=b;this.overrides=a;this.options=N([y.defaults,c,b,a],Q);Ra(this.options);this.viewSpecCache={}},getViewSpec:function(a){var b=this.viewSpecCache;return b[a]||(b[a]=this.buildViewSpec(a))},
getUnitViewSpec:function(a){var b,c,d;if(-1!=g.inArray(a,ja)){b=this.header.getViewsWithButtons();g.each(n.views,function(a){b.push(a)});for(c=0;c<b.length;c++)if((d=this.getViewSpec(b[c]))&&d.singleUnit==a)return d}},buildViewSpec:function(a){for(var b=this.overrides.views||{},c=[],d=[],e=[],f=a,g,m,l;f;)g=K[f],m=b[f],f=null,"function"===typeof g&&(g={"class":g}),g&&(c.unshift(g),d.unshift(g.defaults||{}),l=l||g.duration,f=f||g.type),m&&(e.unshift(m),l=l||m.duration,f=f||m.type);g=N(c);g.type=a;
if(!g["class"])return!1;l&&(l=q.duration(l),l.valueOf()&&(g.duration=l,c=ia(l),1===l.as(c)&&(g.singleUnit=c,e.unshift(b[c]||{}))));g.defaults=N(d,Q);g.overrides=N(e,Q);this.buildViewSpecOptions(g);this.buildViewSpecButtonText(g,a);return g},buildViewSpecOptions:function(a){a.options=N([y.defaults,a.defaults,this.dirDefaults,this.langDefaults,this.overrides,a.overrides],Q);Ra(a.options)},buildViewSpecButtonText:function(a,b){function c(c){c=c.buttonText||{};return c[b]||(a.singleUnit?c[a.singleUnit]:
null)}a.buttonTextOverride=c(this.overrides)||a.overrides.buttonText;a.buttonTextDefault=c(this.langDefaults)||c(this.dirDefaults)||a.defaults.buttonText||c(y.defaults)||(a.duration?this.humanizeDuration(a.duration):null)||b},instantiateView:function(a){var b=this.getViewSpec(a);return new b["class"](this,a,b.options,b.duration)},isValidViewType:function(a){return Boolean(this.getViewSpec(a))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||
this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(a,b){var c=this.moment(a).stripZone(),d;d=b?this.moment(b).stripZone():c.hasTime()?c.clone().add(this.defaultTimedEventDuration):c.clone().add(this.defaultAllDayEventDuration);return{start:c,end:d}}});y.mixin(pb);y.defaults={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,
header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},
theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200};y.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};y.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",
next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var P=n.langs={};n.datepickerLang=function(a,b,c){var d=P[a]||(P[a]={});d.isRTL=c.isRTL;d.weekNumberTitle=c.weekHeader;g.each(sb,function(a,b){d[a]=b(c)});g.datepicker&&(g.datepicker.regional[b]=g.datepicker.regional[a]=c,g.datepicker.regional.en=g.datepicker.regional[""],g.datepicker.setDefaults(c))};n.lang=
function(a,b){var c,d;c=P[a]||(P[a]={});b&&(c=P[a]=N([c,b],Q));d=Sa(a);g.each(tb,function(a,b){null==c[a]&&(c[a]=b(d,c))});y.defaults.lang=a};var sb={buttonText:function(a){return{prev:a.prevText.replace(/&.*?;/g,""),next:a.nextText.replace(/&.*?;/g,""),today:a.currentText.replace(/&.*?;/g,"")}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},tb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l"),c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,
"");return c=b.isRTL?c+" ddd":"ddd "+c},mediumTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(a){return a.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},
noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}},kb={smallDayDateFormat:function(a){return a.isRTL?"D dd":"dd D"},weekFormat:function(a){return a.isRTL?"w[ "+a.weekNumberTitle+"]":"["+a.weekNumberTitle+" ]w"},smallWeekFormat:function(a){return a.isRTL?"w["+a.weekNumberTitle+"]":"["+a.weekNumberTitle+"]w"}};n.lang("en",y.englishDefaults);n.sourceNormalizers=[];n.sourceFetchers=[];var nb={dataType:"json",cache:!1},ob=1;y.prototype.getPeerEvents=function(a,b){var c=
this.getEventCache(),d=[],e,f;for(e=0;e<c.length;e++)f=c[e],(!b||b._id!==f._id)&&d.push(f);return d};var ra=n.BasicView=T.extend({dayGridClass:ca,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid()},instantiateDayGrid:function(){return new (this.dayGridClass.extend(ub))(this)},setRange:function(a){T.prototype.setRange.call(this,a);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);
this.dayGrid.setRange(a)},computeRange:function(a){a=T.prototype.computeRange.call(this,a);/year|month/.test(a.intervalUnit)&&(a.start.startOf("week"),a.start=this.skipHiddenDays(a.start),a.end.weekday()&&(a.end.add(1,"week").startOf("week"),a.end=this.skipHiddenDays(a.end,-1,!0)));return a},renderDates:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml());
this.renderHead();this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml());this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates();this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+
this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!==typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=va(this.el.find(".fc-week-number")))},
setHeight:function(a,b){var c=this.opt("eventLimit"),d;da(this.scrollerEl);ta(this.headRowEl);this.dayGrid.removeSegPopover();c&&"number"===typeof c&&this.dayGrid.limitRows(c);d=this.computeScrollerHeight(a);this.setGridHeight(d,b);c&&"number"!==typeof c&&this.dayGrid.limitRows(c);!b&&wa(this.scrollerEl,d)&&(sa(this.headRowEl,V(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d))},setGridHeight:function(a,b){b?this.dayGrid.rowEls.height(""):ua(this.dayGrid.rowEls,a,!0)},prepareHits:function(){this.dayGrid.prepareHits()},
releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(a,b){return this.dayGrid.queryHit(a,b)},getHitSpan:function(a){return this.dayGrid.getHitSpan(a)},getHitEl:function(a){return this.dayGrid.getHitEl(a)},renderEvents:function(a){this.dayGrid.renderEvents(a);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},
renderSelection:function(a){this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),ub={renderHeadIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<th class="fc-week-number '+a.widgetHeaderClass+'" '+a.weekNumberStyleAttr()+"><span>"+x(a.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(a){var b=this.view;return b.weekNumbersVisible?'<td class="fc-week-number" '+b.weekNumberStyleAttr()+"><span>"+this.getCellDate(a,
0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<td class="fc-week-number '+a.widgetContentClass+'" '+a.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<td class="fc-week-number" '+a.weekNumberStyleAttr()+"></td>":""}},vb=n.MonthView=ra.extend({computeRange:function(a){a=ra.prototype.computeRange.call(this,a);var b;this.isFixedWeeks()&&(b=Math.ceil(a.end.diff(a.start,"weeks",!0)),
a.end.add(6-b,"weeks"));return a},setGridHeight:function(a,b){(b=b||"variable"===this.opt("weekMode"))&&(a*=this.rowCnt/6);ua(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}});K.basic={"class":ra};K.basicDay={type:"basic",duration:{days:1}};K.basicWeek={type:"basic",duration:{weeks:1}};K.month={"class":vb,duration:{months:1},defaults:{fixedWeekCount:!0}};var zb=n.AgendaView=T.extend({timeGridClass:Ya,timeGrid:null,dayGridClass:ca,
dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid();this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid())},instantiateTimeGrid:function(){return new (this.timeGridClass.extend(wb))(this)},instantiateDayGrid:function(){return new (this.dayGridClass.extend(xb))(this)},setRange:function(a){T.prototype.setRange.call(this,a);this.timeGrid.setRange(a);this.dayGrid&&this.dayGrid.setRange(a)},
renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml());this.renderHead();this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.setElement(this.el.find(".fc-time-grid"));this.timeGrid.renderDates();this.bottomRuleEl=g('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight());
this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates();this.timeGrid.removeElement();this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours();this.dayGrid&&this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+
this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){this.timeGrid.updateSize(a);T.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=
va(this.el.find(".fc-axis"))},setHeight:function(a,b){var c;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight());this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");da(this.scrollerEl);ta(this.noScrollRowEls);this.dayGrid&&(this.dayGrid.removeSegPopover(),(c=this.opt("eventLimit"))&&"number"!==typeof c&&(c=yb),c&&this.dayGrid.limitRows(c));b||(c=this.computeScrollerHeight(a),wa(this.scrollerEl,c)?(sa(this.noScrollRowEls,V(this.scrollerEl)),c=this.computeScrollerHeight(a),
this.scrollerEl.height(c)):(this.scrollerEl.height(c).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var a=q.duration(this.opt("scrollTime")),a=this.timeGrid.computeTimeTop(a);(a=Math.ceil(a))&&a++;return a},prepareHits:function(){this.timeGrid.prepareHits();this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits();this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(a,b){var c=this.timeGrid.queryHit(a,b);!c&&this.dayGrid&&
(c=this.dayGrid.queryHit(a,b));return c},getHitSpan:function(a){return a.component.getHitSpan(a)},getHitEl:function(a){return a.component.getHitEl(a)},renderEvents:function(a){var b=[],c=[],d;for(d=0;d<a.length;d++)a[d].allDay?b.push(a[d]):c.push(a[d]);this.timeGrid.renderEvents(c);this.dayGrid&&this.dayGrid.renderEvents(b);this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents();
this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(a,b){if(a.start.hasTime())return this.timeGrid.renderDrag(a,b);if(this.dayGrid)return this.dayGrid.renderDrag(a,b)},unrenderDrag:function(){this.timeGrid.unrenderDrag();this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.timeGrid.unrenderSelection();this.dayGrid&&this.dayGrid.unrenderSelection()}}),
wb={renderHeadIntroHtml:function(){var a=this.view,b;return a.opt("weekNumbers")?(b=this.start.format(a.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+a.widgetHeaderClass+'" '+a.axisStyleAttr()+"><span>"+x(b)+"</span></th>"):'<th class="fc-axis '+a.widgetHeaderClass+'" '+a.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+
"></td>"}},xb={renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"><span>"+(a.opt("allDayHtml")||x(a.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},yb=5,Xa=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];K.agenda={"class":zb,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}};
K.agendaDay={type:"agenda",duration:{days:1}};K.agendaWeek={type:"agenda",duration:{weeks:1}};return n});
